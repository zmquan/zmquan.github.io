<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 8.1.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"www.zmq100.cn","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="软件 版本     grafana Chart Version:6.56.1  App Version:9.5.1   k8s 1.20.11   helm 3.11.1    下载指定版本grafana 1234$ sudo helm repo add grafana https:&#x2F;&#x2F;grafana.github.io&#x2F;helm-charts$ sudo helm repo update$">
<meta property="og:type" content="article">
<meta property="og:title" content="Helm 安装grafana">
<meta property="og:url" content="https://www.zmq100.cn/2023/05/08/helmInstallGrafana/index.html">
<meta property="og:site_name" content="Zmq&#39;s Blog">
<meta property="og:description" content="软件 版本     grafana Chart Version:6.56.1  App Version:9.5.1   k8s 1.20.11   helm 3.11.1    下载指定版本grafana 1234$ sudo helm repo add grafana https:&#x2F;&#x2F;grafana.github.io&#x2F;helm-charts$ sudo helm repo update$">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2023-05-08T11:24:47.000Z">
<meta property="article:modified_time" content="2025-10-30T06:33:20.000Z">
<meta property="article:author" content="zmq">
<meta property="article:tag" content="grafana">
<meta property="article:tag" content="k8s">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://www.zmq100.cn/2023/05/08/helmInstallGrafana/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Helm 安装grafana | Zmq's Blog</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?a81325a5a7afff52c3400dbde0eee2d6";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Zmq's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.zmq100.cn/2023/05/08/helmInstallGrafana/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/tx.jpg">
      <meta itemprop="name" content="zmq">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zmq's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Helm 安装grafana
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-05-08 11:24:47" itemprop="dateCreated datePublished" datetime="2023-05-08T11:24:47+00:00">2023-05-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-10-30 06:33:20" itemprop="dateModified" datetime="2025-10-30T06:33:20+00:00">2025-10-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/" itemprop="url" rel="index"><span itemprop="name">技术文档</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <table>
<thead>
<tr>
<th style="text-align:left">软件</th>
<th style="text-align:left">版本</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">grafana</td>
<td style="text-align:left">Chart Version:6.56.1 <br> App Version:9.5.1</td>
</tr>
<tr>
<td style="text-align:left">k8s</td>
<td style="text-align:left">1.20.11</td>
</tr>
<tr>
<td style="text-align:left">helm</td>
<td style="text-align:left">3.11.1</td>
</tr>
</tbody>
</table>
<h2 id="下载指定版本grafana">下载指定版本grafana</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo helm repo add grafana https://grafana.github.io/helm-charts</span><br><span class="line">$ sudo helm repo update</span><br><span class="line">$ sudo helm fetch grafana/grafana --version 6.56.1</span><br><span class="line">$ sudo tar xf  grafana-6.56.1.tgz</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<details>
  <summary>展开查看目录结构</summary>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">$ tree grafana</span><br><span class="line">grafana</span><br><span class="line">├── Chart.yaml</span><br><span class="line">├── ci</span><br><span class="line">│   ├── default-values.yaml</span><br><span class="line">│   ├── with-affinity-values.yaml</span><br><span class="line">│   ├── with-dashboard-json-values.yaml</span><br><span class="line">│   ├── with-dashboard-values.yaml</span><br><span class="line">│   ├── with-extraconfigmapmounts-values.yaml</span><br><span class="line">│   ├── with-image-renderer-values.yaml</span><br><span class="line">│   └── with-persistence.yaml</span><br><span class="line">├── dashboards</span><br><span class="line">│   └── custom-dashboard.json</span><br><span class="line">├── README.md</span><br><span class="line">├── templates</span><br><span class="line">│   ├── clusterrolebinding.yaml</span><br><span class="line">│   ├── clusterrole.yaml</span><br><span class="line">│   ├── configmap-dashboard-provider.yaml</span><br><span class="line">│   ├── configmap.yaml</span><br><span class="line">│   ├── dashboards-json-configmap.yaml</span><br><span class="line">│   ├── deployment.yaml</span><br><span class="line">│   ├── extra-manifests.yaml</span><br><span class="line">│   ├── headless-service.yaml</span><br><span class="line">│   ├── _helpers.tpl</span><br><span class="line">│   ├── hpa.yaml</span><br><span class="line">│   ├── image-renderer-deployment.yaml</span><br><span class="line">│   ├── image-renderer-hpa.yaml</span><br><span class="line">│   ├── image-renderer-network-policy.yaml</span><br><span class="line">│   ├── image-renderer-servicemonitor.yaml</span><br><span class="line">│   ├── image-renderer-service.yaml</span><br><span class="line">│   ├── ingress.yaml</span><br><span class="line">│   ├── networkpolicy.yaml</span><br><span class="line">│   ├── NOTES.txt</span><br><span class="line">│   ├── poddisruptionbudget.yaml</span><br><span class="line">│   ├── podsecuritypolicy.yaml</span><br><span class="line">│   ├── _pod.tpl</span><br><span class="line">│   ├── pvc.yaml</span><br><span class="line">│   ├── rolebinding.yaml</span><br><span class="line">│   ├── role.yaml</span><br><span class="line">│   ├── secret-env.yaml</span><br><span class="line">│   ├── secret.yaml</span><br><span class="line">│   ├── serviceaccount.yaml</span><br><span class="line">│   ├── servicemonitor.yaml</span><br><span class="line">│   ├── service.yaml</span><br><span class="line">│   ├── statefulset.yaml</span><br><span class="line">│   └── tests</span><br><span class="line">│       ├── test-configmap.yaml</span><br><span class="line">│       ├── test-podsecuritypolicy.yaml</span><br><span class="line">│       ├── test-rolebinding.yaml</span><br><span class="line">│       ├── test-role.yaml</span><br><span class="line">│       ├── test-serviceaccount.yaml</span><br><span class="line">│       └── test.yaml</span><br><span class="line">└── values.yaml</span><br><span class="line"></span><br><span class="line">4 directories, 47 files</span><br></pre></td></tr></table></figure>
</details>
<h2 id="查看values-yaml">查看values.yaml</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cat</span>  grafana/values.yaml</span><br></pre></td></tr></table></figure>
<details>
  <summary>展开查看values.yaml</summary>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br><span class="line">1178</span><br><span class="line">1179</span><br><span class="line">1180</span><br><span class="line">1181</span><br><span class="line">1182</span><br><span class="line">1183</span><br><span class="line">1184</span><br><span class="line">1185</span><br><span class="line">1186</span><br><span class="line">1187</span><br><span class="line">1188</span><br><span class="line">1189</span><br><span class="line">1190</span><br><span class="line">1191</span><br><span class="line">1192</span><br><span class="line">1193</span><br><span class="line">1194</span><br><span class="line">1195</span><br><span class="line">1196</span><br><span class="line">1197</span><br><span class="line">1198</span><br><span class="line">1199</span><br><span class="line">1200</span><br><span class="line">1201</span><br><span class="line">1202</span><br><span class="line">1203</span><br><span class="line">1204</span><br><span class="line">1205</span><br><span class="line">1206</span><br><span class="line">1207</span><br><span class="line">1208</span><br><span class="line">1209</span><br><span class="line">1210</span><br><span class="line">1211</span><br><span class="line">1212</span><br><span class="line">1213</span><br><span class="line">1214</span><br><span class="line">1215</span><br><span class="line">1216</span><br><span class="line">1217</span><br><span class="line">1218</span><br><span class="line">1219</span><br><span class="line">1220</span><br><span class="line">1221</span><br><span class="line">1222</span><br><span class="line">1223</span><br><span class="line">1224</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">global:</span></span><br><span class="line">  <span class="comment"># To help compatibility with other charts which use global.imagePullSecrets.</span></span><br><span class="line">  <span class="comment"># Allow either an array of &#123;name: pullSecret&#125; maps (k8s-style), or an array of strings (more common helm-style).</span></span><br><span class="line">  <span class="comment"># Can be tempalted.</span></span><br><span class="line">  <span class="comment"># global:</span></span><br><span class="line">  <span class="comment">#   imagePullSecrets:</span></span><br><span class="line">  <span class="comment">#   - name: pullSecret1</span></span><br><span class="line">  <span class="comment">#   - name: pullSecret2</span></span><br><span class="line">  <span class="comment"># or</span></span><br><span class="line">  <span class="comment"># global:</span></span><br><span class="line">  <span class="comment">#   imagePullSecrets:</span></span><br><span class="line">  <span class="comment">#   - pullSecret1</span></span><br><span class="line">  <span class="comment">#   - pullSecret2</span></span><br><span class="line">  <span class="attr">imagePullSecrets:</span> []</span><br><span class="line"></span><br><span class="line"><span class="attr">rbac:</span></span><br><span class="line">  <span class="attr">create:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment">## Use an existing ClusterRole/Role (depending on rbac.namespaced false/true)</span></span><br><span class="line">  <span class="comment"># useExistingRole: name-of-some-(cluster)role</span></span><br><span class="line">  <span class="attr">pspEnabled:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">pspUseAppArmor:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">namespaced:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">extraRoleRules:</span> []</span><br><span class="line">  <span class="comment"># - apiGroups: []</span></span><br><span class="line">  <span class="comment">#   resources: []</span></span><br><span class="line">  <span class="comment">#   verbs: []</span></span><br><span class="line">  <span class="attr">extraClusterRoleRules:</span> []</span><br><span class="line">  <span class="comment"># - apiGroups: []</span></span><br><span class="line">  <span class="comment">#   resources: []</span></span><br><span class="line">  <span class="comment">#   verbs: []</span></span><br><span class="line"><span class="attr">serviceAccount:</span></span><br><span class="line">  <span class="attr">create:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">name:</span></span><br><span class="line">  <span class="attr">nameTest:</span></span><br><span class="line">  <span class="comment">## ServiceAccount labels.</span></span><br><span class="line">  <span class="attr">labels:</span> &#123;&#125;</span><br><span class="line"><span class="comment">## Service account annotations. Can be templated.</span></span><br><span class="line"><span class="comment">#  annotations:</span></span><br><span class="line"><span class="comment">#    eks.amazonaws.com/role-arn: arn:aws:iam::123456789000:role/iam-role-name-here</span></span><br><span class="line">  <span class="attr">autoMount:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Create a headless service for the deployment</span></span><br><span class="line"><span class="attr">headlessService:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Create HorizontalPodAutoscaler object for deployment type</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="attr">autoscaling:</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">minReplicas:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">maxReplicas:</span> <span class="number">5</span></span><br><span class="line">  <span class="attr">targetCPU:</span> <span class="string">&quot;60&quot;</span></span><br><span class="line">  <span class="attr">targetMemory:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="attr">behavior:</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">## See `kubectl explain poddisruptionbudget.spec` for more</span></span><br><span class="line"><span class="comment">## ref: https://kubernetes.io/docs/tasks/run-application/configure-pdb/</span></span><br><span class="line"><span class="attr">podDisruptionBudget:</span> &#123;&#125;</span><br><span class="line"><span class="comment">#  minAvailable: 1</span></span><br><span class="line"><span class="comment">#  maxUnavailable: 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## See `kubectl explain deployment.spec.strategy` for more</span></span><br><span class="line"><span class="comment">## ref: https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#strategy</span></span><br><span class="line"><span class="attr">deploymentStrategy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">RollingUpdate</span></span><br><span class="line"></span><br><span class="line"><span class="attr">readinessProbe:</span></span><br><span class="line">  <span class="attr">httpGet:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">/api/health</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">3000</span></span><br><span class="line"></span><br><span class="line"><span class="attr">livenessProbe:</span></span><br><span class="line">  <span class="attr">httpGet:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">/api/health</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">3000</span></span><br><span class="line">  <span class="attr">initialDelaySeconds:</span> <span class="number">60</span></span><br><span class="line">  <span class="attr">timeoutSeconds:</span> <span class="number">30</span></span><br><span class="line">  <span class="attr">failureThreshold:</span> <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Use an alternate scheduler, e.g. &quot;stork&quot;.</span></span><br><span class="line"><span class="comment">## ref: https://kubernetes.io/docs/tasks/administer-cluster/configure-multiple-schedulers/</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment"># schedulerName: &quot;default-scheduler&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">image:</span></span><br><span class="line">  <span class="attr">repository:</span> <span class="string">docker.io/grafana/grafana</span></span><br><span class="line">  <span class="comment"># Overrides the Grafana image tag whose default is the chart appVersion</span></span><br><span class="line">  <span class="attr">tag:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="attr">sha:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="attr">pullPolicy:</span> <span class="string">IfNotPresent</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">## Optionally specify an array of imagePullSecrets.</span></span><br><span class="line">  <span class="comment">## Secrets must be manually created in the namespace.</span></span><br><span class="line">  <span class="comment">## ref: https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/</span></span><br><span class="line">  <span class="comment">## Can be templated.</span></span><br><span class="line">  <span class="comment">##</span></span><br><span class="line">  <span class="attr">pullSecrets:</span> []</span><br><span class="line">  <span class="comment">#   - myRegistrKeySecretName</span></span><br><span class="line"></span><br><span class="line"><span class="attr">testFramework:</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">image:</span> <span class="string">docker.io/bats/bats</span></span><br><span class="line">  <span class="attr">tag:</span> <span class="string">&quot;v1.4.1&quot;</span></span><br><span class="line">  <span class="attr">imagePullPolicy:</span> <span class="string">IfNotPresent</span></span><br><span class="line">  <span class="attr">securityContext:</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="attr">securityContext:</span></span><br><span class="line">  <span class="attr">runAsNonRoot:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">runAsUser:</span> <span class="number">472</span></span><br><span class="line">  <span class="attr">runAsGroup:</span> <span class="number">472</span></span><br><span class="line">  <span class="attr">fsGroup:</span> <span class="number">472</span></span><br><span class="line"></span><br><span class="line"><span class="attr">containerSecurityContext:</span></span><br><span class="line">  <span class="attr">capabilities:</span></span><br><span class="line">    <span class="attr">drop:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">ALL</span></span><br><span class="line">  <span class="attr">seccompProfile:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">RuntimeDefault</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable creating the grafana configmap</span></span><br><span class="line"><span class="attr">createConfigmap:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Extra configmaps to mount in grafana pods</span></span><br><span class="line"><span class="comment"># Values are templated.</span></span><br><span class="line"><span class="attr">extraConfigmapMounts:</span> []</span><br><span class="line">  <span class="comment"># - name: certs-configmap</span></span><br><span class="line">  <span class="comment">#   mountPath: /etc/grafana/ssl/</span></span><br><span class="line">  <span class="comment">#   subPath: certificates.crt # (optional)</span></span><br><span class="line">  <span class="comment">#   configMap: certs-configmap</span></span><br><span class="line">  <span class="comment">#   readOnly: true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">extraEmptyDirMounts:</span> []</span><br><span class="line">  <span class="comment"># - name: provisioning-notifiers</span></span><br><span class="line">  <span class="comment">#   mountPath: /etc/grafana/provisioning/notifiers</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Apply extra labels to common labels.</span></span><br><span class="line"><span class="attr">extraLabels:</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">## Assign a PriorityClassName to pods if set</span></span><br><span class="line"><span class="comment"># priorityClassName:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">downloadDashboardsImage:</span></span><br><span class="line">  <span class="attr">repository:</span> <span class="string">docker.io/curlimages/curl</span></span><br><span class="line">  <span class="attr">tag:</span> <span class="number">7.85</span><span class="number">.0</span></span><br><span class="line">  <span class="attr">sha:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="attr">pullPolicy:</span> <span class="string">IfNotPresent</span></span><br><span class="line"></span><br><span class="line"><span class="attr">downloadDashboards:</span></span><br><span class="line">  <span class="attr">env:</span> &#123;&#125;</span><br><span class="line">  <span class="attr">envFromSecret:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="attr">resources:</span> &#123;&#125;</span><br><span class="line">  <span class="attr">securityContext:</span></span><br><span class="line">    <span class="attr">allowPrivilegeEscalation:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">capabilities:</span></span><br><span class="line">      <span class="attr">drop:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ALL</span></span><br><span class="line">    <span class="attr">seccompProfile:</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">RuntimeDefault</span></span><br><span class="line">  <span class="attr">envValueFrom:</span> &#123;&#125;</span><br><span class="line">  <span class="comment">#  ENV_NAME:</span></span><br><span class="line">  <span class="comment">#    configMapKeyRef:</span></span><br><span class="line">  <span class="comment">#      name: configmap-name</span></span><br><span class="line">  <span class="comment">#      key: value_key</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Pod Annotations</span></span><br><span class="line"><span class="comment"># podAnnotations: &#123;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Pod Labels</span></span><br><span class="line"><span class="comment"># podLabels: &#123;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">podPortName:</span> <span class="string">grafana</span></span><br><span class="line"><span class="attr">gossipPortName:</span> <span class="string">gossip</span></span><br><span class="line"><span class="comment">## Deployment annotations</span></span><br><span class="line"><span class="comment"># annotations: &#123;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Expose the grafana service to be accessed from outside the cluster (LoadBalancer service).</span></span><br><span class="line"><span class="comment">## or access it from within the cluster (ClusterIP service). Set the service type and the port to serve it.</span></span><br><span class="line"><span class="comment">## ref: http://kubernetes.io/docs/user-guide/services/</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="attr">service:</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">ClusterIP</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line">  <span class="attr">targetPort:</span> <span class="number">3000</span></span><br><span class="line">    <span class="comment"># targetPort: 4181 To be used with a proxy extraContainer</span></span><br><span class="line">  <span class="comment">## Service annotations. Can be templated.</span></span><br><span class="line">  <span class="attr">annotations:</span> &#123;&#125;</span><br><span class="line">  <span class="attr">labels:</span> &#123;&#125;</span><br><span class="line">  <span class="attr">portName:</span> <span class="string">service</span></span><br><span class="line">  <span class="comment"># Adds the appProtocol field to the service. This allows to work with istio protocol selection. Ex: &quot;http&quot; or &quot;tcp&quot;</span></span><br><span class="line">  <span class="attr">appProtocol:</span> <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">serviceMonitor:</span></span><br><span class="line">  <span class="comment">## If true, a ServiceMonitor CRD is created for a prometheus operator</span></span><br><span class="line">  <span class="comment">## https://github.com/coreos/prometheus-operator</span></span><br><span class="line">  <span class="comment">##</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">/metrics</span></span><br><span class="line">  <span class="comment">#  namespace: monitoring  (defaults to use the namespace this chart is deployed to)</span></span><br><span class="line">  <span class="attr">labels:</span> &#123;&#125;</span><br><span class="line">  <span class="attr">interval:</span> <span class="string">1m</span></span><br><span class="line">  <span class="attr">scheme:</span> <span class="string">http</span></span><br><span class="line">  <span class="attr">tlsConfig:</span> &#123;&#125;</span><br><span class="line">  <span class="attr">scrapeTimeout:</span> <span class="string">30s</span></span><br><span class="line">  <span class="attr">relabelings:</span> []</span><br><span class="line">  <span class="attr">targetLabels:</span> []</span><br><span class="line"></span><br><span class="line"><span class="attr">extraExposePorts:</span> []</span><br><span class="line"> <span class="comment"># - name: keycloak</span></span><br><span class="line"> <span class="comment">#   port: 8080</span></span><br><span class="line"> <span class="comment">#   targetPort: 8080</span></span><br><span class="line"> <span class="comment">#   type: ClusterIP</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># overrides pod.spec.hostAliases in the grafana deployment&#x27;s pods</span></span><br><span class="line"><span class="attr">hostAliases:</span> []</span><br><span class="line">  <span class="comment"># - ip: &quot;1.2.3.4&quot;</span></span><br><span class="line">  <span class="comment">#   hostnames:</span></span><br><span class="line">  <span class="comment">#     - &quot;my.host.com&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">ingress:</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># For Kubernetes &gt;= 1.18 you should specify the ingress-controller via the field ingressClassName</span></span><br><span class="line">  <span class="comment"># See https://kubernetes.io/blog/2020/04/02/improvements-to-the-ingress-api-in-kubernetes-1.18/#specifying-the-class-of-an-ingress</span></span><br><span class="line">  <span class="comment"># ingressClassName: nginx</span></span><br><span class="line">  <span class="comment"># Values can be templated</span></span><br><span class="line">  <span class="attr">annotations:</span> &#123;&#125;</span><br><span class="line">    <span class="comment"># kubernetes.io/ingress.class: nginx</span></span><br><span class="line">    <span class="comment"># kubernetes.io/tls-acme: &quot;true&quot;</span></span><br><span class="line">  <span class="attr">labels:</span> &#123;&#125;</span><br><span class="line">  <span class="attr">path:</span> <span class="string">/</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># pathType is only for k8s &gt;= 1.1=</span></span><br><span class="line">  <span class="attr">pathType:</span> <span class="string">Prefix</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">hosts:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">chart-example.local</span></span><br><span class="line">  <span class="comment">## Extra paths to prepend to every host configuration. This is useful when working with annotation based services.</span></span><br><span class="line">  <span class="attr">extraPaths:</span> []</span><br><span class="line">  <span class="comment"># - path: /*</span></span><br><span class="line">  <span class="comment">#   backend:</span></span><br><span class="line">  <span class="comment">#     serviceName: ssl-redirect</span></span><br><span class="line">  <span class="comment">#     servicePort: use-annotation</span></span><br><span class="line">  <span class="comment">## Or for k8s &gt; 1.19</span></span><br><span class="line">  <span class="comment"># - path: /*</span></span><br><span class="line">  <span class="comment">#   pathType: Prefix</span></span><br><span class="line">  <span class="comment">#   backend:</span></span><br><span class="line">  <span class="comment">#     service:</span></span><br><span class="line">  <span class="comment">#       name: ssl-redirect</span></span><br><span class="line">  <span class="comment">#       port:</span></span><br><span class="line">  <span class="comment">#         name: use-annotation</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="attr">tls:</span> []</span><br><span class="line">  <span class="comment">#  - secretName: chart-example-tls</span></span><br><span class="line">  <span class="comment">#    hosts:</span></span><br><span class="line">  <span class="comment">#      - chart-example.local</span></span><br><span class="line"></span><br><span class="line"><span class="attr">resources:</span> &#123;&#125;</span><br><span class="line"><span class="comment">#  limits:</span></span><br><span class="line"><span class="comment">#    cpu: 100m</span></span><br><span class="line"><span class="comment">#    memory: 128Mi</span></span><br><span class="line"><span class="comment">#  requests:</span></span><br><span class="line"><span class="comment">#    cpu: 100m</span></span><br><span class="line"><span class="comment">#    memory: 128Mi</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Node labels for pod assignment</span></span><br><span class="line"><span class="comment">## ref: https://kubernetes.io/docs/user-guide/node-selection/</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="attr">nodeSelector:</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">## Tolerations for pod assignment</span></span><br><span class="line"><span class="comment">## ref: https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="attr">tolerations:</span> []</span><br><span class="line"></span><br><span class="line"><span class="comment">## Affinity for pod assignment (evaluated as template)</span></span><br><span class="line"><span class="comment">## ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="attr">affinity:</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">## Topology Spread Constraints</span></span><br><span class="line"><span class="comment">## ref: https://kubernetes.io/docs/concepts/workloads/pods/pod-topology-spread-constraints/</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="attr">topologySpreadConstraints:</span> []</span><br><span class="line"></span><br><span class="line"><span class="comment">## Additional init containers (evaluated as template)</span></span><br><span class="line"><span class="comment">## ref: https://kubernetes.io/docs/concepts/workloads/pods/init-containers/</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="attr">extraInitContainers:</span> []</span><br><span class="line"></span><br><span class="line"><span class="comment">## Enable an Specify container in extraContainers. This is meant to allow adding an authentication proxy to a grafana pod</span></span><br><span class="line"><span class="attr">extraContainers:</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="comment"># extraContainers: |</span></span><br><span class="line"><span class="comment"># - name: proxy</span></span><br><span class="line"><span class="comment">#   image: quay.io/gambol99/keycloak-proxy:latest</span></span><br><span class="line"><span class="comment">#   args:</span></span><br><span class="line"><span class="comment">#   - -provider=github</span></span><br><span class="line"><span class="comment">#   - -client-id=</span></span><br><span class="line"><span class="comment">#   - -client-secret=</span></span><br><span class="line"><span class="comment">#   - -github-org=&lt;ORG_NAME&gt;</span></span><br><span class="line"><span class="comment">#   - -email-domain=*</span></span><br><span class="line"><span class="comment">#   - -cookie-secret=</span></span><br><span class="line"><span class="comment">#   - -http-address=http://0.0.0.0:4181</span></span><br><span class="line"><span class="comment">#   - -upstream-url=http://127.0.0.1:3000</span></span><br><span class="line"><span class="comment">#   ports:</span></span><br><span class="line"><span class="comment">#     - name: proxy-web</span></span><br><span class="line"><span class="comment">#       containerPort: 4181</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Volumes that can be used in init containers that will not be mounted to deployment pods</span></span><br><span class="line"><span class="attr">extraContainerVolumes:</span> []</span><br><span class="line"><span class="comment">#  - name: volume-from-secret</span></span><br><span class="line"><span class="comment">#    secret:</span></span><br><span class="line"><span class="comment">#      secretName: secret-to-mount</span></span><br><span class="line"><span class="comment">#  - name: empty-dir-volume</span></span><br><span class="line"><span class="comment">#    emptyDir: &#123;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Enable persistence using Persistent Volume Claims</span></span><br><span class="line"><span class="comment">## ref: http://kubernetes.io/docs/user-guide/persistent-volumes/</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="attr">persistence:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">pvc</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="string">fasle</span></span><br><span class="line">  <span class="comment"># storageClassName: default</span></span><br><span class="line">  <span class="attr">accessModes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">ReadWriteOnce</span></span><br><span class="line">  <span class="attr">size:</span> <span class="string">10Gi</span></span><br><span class="line">  <span class="comment"># annotations: &#123;&#125;</span></span><br><span class="line">  <span class="attr">finalizers:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">kubernetes.io/pvc-protection</span></span><br><span class="line">  <span class="comment"># selectorLabels: &#123;&#125;</span></span><br><span class="line">  <span class="comment">## Sub-directory of the PV to mount. Can be templated.</span></span><br><span class="line">  <span class="comment"># subPath: &quot;&quot;</span></span><br><span class="line">  <span class="comment">## Name of an existing PVC. Can be templated.</span></span><br><span class="line">  <span class="comment"># existingClaim:</span></span><br><span class="line">  <span class="comment">## Extra labels to apply to a PVC.</span></span><br><span class="line">  <span class="attr">extraPvcLabels:</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">## If persistence is not enabled, this allows to mount the</span></span><br><span class="line">  <span class="comment">## local storage in-memory to improve performance</span></span><br><span class="line">  <span class="comment">##</span></span><br><span class="line">  <span class="attr">inMemory:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment">## The maximum usage on memory medium EmptyDir would be</span></span><br><span class="line">    <span class="comment">## the minimum value between the SizeLimit specified</span></span><br><span class="line">    <span class="comment">## here and the sum of memory limits of all containers in a pod</span></span><br><span class="line">    <span class="comment">##</span></span><br><span class="line">    <span class="comment"># sizeLimit: 300Mi</span></span><br><span class="line"></span><br><span class="line"><span class="attr">initChownData:</span></span><br><span class="line">  <span class="comment">## If false, data ownership will not be reset at startup</span></span><br><span class="line">  <span class="comment">## This allows the grafana-server to be run with an arbitrary user</span></span><br><span class="line">  <span class="comment">##</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">## initChownData container image</span></span><br><span class="line">  <span class="comment">##</span></span><br><span class="line">  <span class="attr">image:</span></span><br><span class="line">    <span class="attr">repository:</span> <span class="string">docker.io/library/busybox</span></span><br><span class="line">    <span class="attr">tag:</span> <span class="string">&quot;1.31.1&quot;</span></span><br><span class="line">    <span class="attr">sha:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="attr">pullPolicy:</span> <span class="string">IfNotPresent</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">## initChownData resource requests and limits</span></span><br><span class="line">  <span class="comment">## Ref: http://kubernetes.io/docs/user-guide/compute-resources/</span></span><br><span class="line">  <span class="comment">##</span></span><br><span class="line">  <span class="attr">resources:</span> &#123;&#125;</span><br><span class="line">  <span class="comment">#  limits:</span></span><br><span class="line">  <span class="comment">#    cpu: 100m</span></span><br><span class="line">  <span class="comment">#    memory: 128Mi</span></span><br><span class="line">  <span class="comment">#  requests:</span></span><br><span class="line">  <span class="comment">#    cpu: 100m</span></span><br><span class="line">  <span class="comment">#    memory: 128Mi</span></span><br><span class="line">  <span class="attr">securityContext:</span></span><br><span class="line">    <span class="attr">runAsNonRoot:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">runAsUser:</span> <span class="number">0</span></span><br><span class="line">    <span class="attr">seccompProfile:</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">RuntimeDefault</span></span><br><span class="line">    <span class="attr">capabilities:</span></span><br><span class="line">      <span class="attr">add:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">CHOWN</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Administrator credentials when not using an existing secret (see below)</span></span><br><span class="line"><span class="attr">adminUser:</span> <span class="string">admin</span></span><br><span class="line"><span class="comment"># adminPassword: strongpassword</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Use an existing secret for the admin user.</span></span><br><span class="line"><span class="attr">admin:</span></span><br><span class="line">  <span class="comment">## Name of the secret. Can be templated.</span></span><br><span class="line">  <span class="attr">existingSecret:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="attr">userKey:</span> <span class="string">admin-user</span></span><br><span class="line">  <span class="attr">passwordKey:</span> <span class="string">admin-password</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Define command to be executed at startup by grafana container</span></span><br><span class="line"><span class="comment">## Needed if using `vault-env` to manage secrets (ref: https://banzaicloud.com/blog/inject-secrets-into-pods-vault/)</span></span><br><span class="line"><span class="comment">## Default is &quot;run.sh&quot; as defined in grafana&#x27;s Dockerfile</span></span><br><span class="line"><span class="comment"># command:</span></span><br><span class="line"><span class="comment"># - &quot;sh&quot;</span></span><br><span class="line"><span class="comment"># - &quot;/run.sh&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Optionally define args if command is used</span></span><br><span class="line"><span class="comment">## Needed if using `hashicorp/envconsul` to manage secrets</span></span><br><span class="line"><span class="comment">## By default no arguments are set</span></span><br><span class="line"><span class="comment"># args:</span></span><br><span class="line"><span class="comment"># - &quot;-secret&quot;</span></span><br><span class="line"><span class="comment"># - &quot;secret/grafana&quot;</span></span><br><span class="line"><span class="comment"># - &quot;./grafana&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Extra environment variables that will be pass onto deployment pods</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## to provide grafana with access to CloudWatch on AWS EKS:</span></span><br><span class="line"><span class="comment">## 1. create an iam role of type &quot;Web identity&quot; with provider oidc.eks.* (note the provider for later)</span></span><br><span class="line"><span class="comment">## 2. edit the &quot;Trust relationships&quot; of the role, add a line inside the StringEquals clause using the</span></span><br><span class="line"><span class="comment">## same oidc eks provider as noted before (same as the existing line)</span></span><br><span class="line"><span class="comment">## also, replace NAMESPACE and prometheus-operator-grafana with the service account namespace and name</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">##  &quot;oidc.eks.us-east-1.amazonaws.com/id/XXXXXXXXXXXXXXXXXXXXXXXXXXXXX<span class="doctag">XXX:</span>sub&quot;: &quot;system:serviceaccount:NAMESPACE:prometheus-operator-grafana&quot;,</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 3. attach a policy to the role, you can use a built in policy called CloudWatchReadOnlyAccess</span></span><br><span class="line"><span class="comment">## 4. use the following env: (replace 123456789000 and iam-role-name-here with your aws account number and role name)</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## env:</span></span><br><span class="line"><span class="comment">##   AWS_ROLE_ARN: arn:aws:iam::123456789000:role/iam-role-name-here</span></span><br><span class="line"><span class="comment">##   AWS_WEB_IDENTITY_TOKEN_FILE: /var/run/secrets/eks.amazonaws.com/serviceaccount/token</span></span><br><span class="line"><span class="comment">##   AWS_REGION: us-east-1</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## 5. uncomment the EKS section in extraSecretMounts: below</span></span><br><span class="line"><span class="comment">## 6. uncomment the annotation section in the serviceAccount: above</span></span><br><span class="line"><span class="comment">## make sure to replace arn:aws:iam::123456789000:role/iam-role-name-here with your role arn</span></span><br><span class="line"></span><br><span class="line"><span class="attr">env:</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">## &quot;valueFrom&quot; environment variable references that will be added to deployment pods. Name is templated.</span></span><br><span class="line"><span class="comment">## ref: https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.19/#envvarsource-v1-core</span></span><br><span class="line"><span class="comment">## Renders in container spec as:</span></span><br><span class="line"><span class="comment">##   env:</span></span><br><span class="line"><span class="comment">##     ...</span></span><br><span class="line"><span class="comment">##     - name: &lt;key&gt;</span></span><br><span class="line"><span class="comment">##       valueFrom:</span></span><br><span class="line"><span class="comment">##         &lt;value rendered as YAML&gt;</span></span><br><span class="line"><span class="attr">envValueFrom:</span> &#123;&#125;</span><br><span class="line">  <span class="comment">#  ENV_NAME:</span></span><br><span class="line">  <span class="comment">#    configMapKeyRef:</span></span><br><span class="line">  <span class="comment">#      name: configmap-name</span></span><br><span class="line">  <span class="comment">#      key: value_key</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## The name of a secret in the same kubernetes namespace which contain values to be added to the environment</span></span><br><span class="line"><span class="comment">## This can be useful for auth tokens, etc. Value is templated.</span></span><br><span class="line"><span class="attr">envFromSecret:</span> <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Sensible environment variables that will be rendered as new secret object</span></span><br><span class="line"><span class="comment">## This can be useful for auth tokens, etc</span></span><br><span class="line"><span class="attr">envRenderSecret:</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">## The names of secrets in the same kubernetes namespace which contain values to be added to the environment</span></span><br><span class="line"><span class="comment">## Each entry should contain a name key, and can optionally specify whether the secret must be defined with an optional key.</span></span><br><span class="line"><span class="comment">## Name is templated.</span></span><br><span class="line"><span class="attr">envFromSecrets:</span> []</span><br><span class="line"><span class="comment">## - name: secret-name</span></span><br><span class="line"><span class="comment">##   optional: true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## The names of conifgmaps in the same kubernetes namespace which contain values to be added to the environment</span></span><br><span class="line"><span class="comment">## Each entry should contain a name key, and can optionally specify whether the configmap must be defined with an optional key.</span></span><br><span class="line"><span class="comment">## Name is templated.</span></span><br><span class="line"><span class="comment">## ref: https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.23/#configmapenvsource-v1-core</span></span><br><span class="line"><span class="attr">envFromConfigMaps:</span> []</span><br><span class="line"><span class="comment">## - name: configmap-name</span></span><br><span class="line"><span class="comment">##   optional: true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Inject Kubernetes services as environment variables.</span></span><br><span class="line"><span class="comment"># See https://kubernetes.io/docs/concepts/services-networking/connect-applications-service/#environment-variables</span></span><br><span class="line"><span class="attr">enableServiceLinks:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Additional grafana server secret mounts</span></span><br><span class="line"><span class="comment"># Defines additional mounts with secrets. Secrets must be manually created in the namespace.</span></span><br><span class="line"><span class="attr">extraSecretMounts:</span> []</span><br><span class="line">  <span class="comment"># - name: secret-files</span></span><br><span class="line">  <span class="comment">#   mountPath: /etc/secrets</span></span><br><span class="line">  <span class="comment">#   secretName: grafana-secret-files</span></span><br><span class="line">  <span class="comment">#   readOnly: true</span></span><br><span class="line">  <span class="comment">#   subPath: &quot;&quot;</span></span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">  <span class="comment"># for AWS EKS (cloudwatch) use the following (see also instruction in env: above)</span></span><br><span class="line">  <span class="comment"># - name: aws-iam-token</span></span><br><span class="line">  <span class="comment">#   mountPath: /var/run/secrets/eks.amazonaws.com/serviceaccount</span></span><br><span class="line">  <span class="comment">#   readOnly: true</span></span><br><span class="line">  <span class="comment">#   projected:</span></span><br><span class="line">  <span class="comment">#     defaultMode: 420</span></span><br><span class="line">  <span class="comment">#     sources:</span></span><br><span class="line">  <span class="comment">#       - serviceAccountToken:</span></span><br><span class="line">  <span class="comment">#           audience: sts.amazonaws.com</span></span><br><span class="line">  <span class="comment">#           expirationSeconds: 86400</span></span><br><span class="line">  <span class="comment">#           path: token</span></span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">  <span class="comment"># for CSI e.g. Azure Key Vault use the following</span></span><br><span class="line">  <span class="comment"># - name: secrets-store-inline</span></span><br><span class="line">  <span class="comment">#  mountPath: /run/secrets</span></span><br><span class="line">  <span class="comment">#  readOnly: true</span></span><br><span class="line">  <span class="comment">#  csi:</span></span><br><span class="line">  <span class="comment">#    driver: secrets-store.csi.k8s.io</span></span><br><span class="line">  <span class="comment">#    readOnly: true</span></span><br><span class="line">  <span class="comment">#    volumeAttributes:</span></span><br><span class="line">  <span class="comment">#      secretProviderClass: &quot;akv-grafana-spc&quot;</span></span><br><span class="line">  <span class="comment">#    nodePublishSecretRef:                       # Only required when using service principal mode</span></span><br><span class="line">  <span class="comment">#       name: grafana-akv-creds                  # Only required when using service principal mode</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Additional grafana server volume mounts</span></span><br><span class="line"><span class="comment"># Defines additional volume mounts.</span></span><br><span class="line"><span class="attr">extraVolumeMounts:</span> []</span><br><span class="line">  <span class="comment"># - name: extra-volume-0</span></span><br><span class="line">  <span class="comment">#   mountPath: /mnt/volume0</span></span><br><span class="line">  <span class="comment">#   readOnly: true</span></span><br><span class="line">  <span class="comment">#   existingClaim: volume-claim</span></span><br><span class="line">  <span class="comment"># - name: extra-volume-1</span></span><br><span class="line">  <span class="comment">#   mountPath: /mnt/volume1</span></span><br><span class="line">  <span class="comment">#   readOnly: true</span></span><br><span class="line">  <span class="comment">#   hostPath: /usr/shared/</span></span><br><span class="line">  <span class="comment"># - name: grafana-secrets</span></span><br><span class="line">  <span class="comment">#   csi: true</span></span><br><span class="line">  <span class="comment">#   data:</span></span><br><span class="line">  <span class="comment">#     driver: secrets-store.csi.k8s.io</span></span><br><span class="line">  <span class="comment">#     readOnly: true</span></span><br><span class="line">  <span class="comment">#     volumeAttributes:</span></span><br><span class="line">  <span class="comment">#       secretProviderClass: &quot;grafana-env-spc&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Container Lifecycle Hooks. Execute a specific bash command or make an HTTP request</span></span><br><span class="line"><span class="attr">lifecycleHooks:</span> &#123;&#125;</span><br><span class="line">  <span class="comment"># postStart:</span></span><br><span class="line">  <span class="comment">#   exec:</span></span><br><span class="line">  <span class="comment">#     command: []</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Pass the plugins you want installed as a list.</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="attr">plugins:</span> []</span><br><span class="line">  <span class="comment"># - digrich-bubblechart-panel</span></span><br><span class="line">  <span class="comment"># - grafana-clock-panel</span></span><br><span class="line">  <span class="comment">## You can also use other plugin download URL, as long as they are valid zip files,</span></span><br><span class="line">  <span class="comment">## and specify the name of the plugin after the semicolon. Like this:</span></span><br><span class="line">  <span class="comment"># - https://grafana.com/api/plugins/marcusolsson-json-datasource/versions/1.3.2/download;marcusolsson-json-datasource</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Configure grafana datasources</span></span><br><span class="line"><span class="comment">## ref: http://docs.grafana.org/administration/provisioning/#datasources</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="attr">datasources:</span> &#123;&#125;</span><br><span class="line"><span class="comment">#  datasources.yaml:</span></span><br><span class="line"><span class="comment">#    apiVersion: 1</span></span><br><span class="line"><span class="comment">#    datasources:</span></span><br><span class="line"><span class="comment">#    - name: Prometheus</span></span><br><span class="line"><span class="comment">#      type: prometheus</span></span><br><span class="line"><span class="comment">#      url: http://prometheus-prometheus-server</span></span><br><span class="line"><span class="comment">#      access: proxy</span></span><br><span class="line"><span class="comment">#      isDefault: true</span></span><br><span class="line"><span class="comment">#    - name: CloudWatch</span></span><br><span class="line"><span class="comment">#      type: cloudwatch</span></span><br><span class="line"><span class="comment">#      access: proxy</span></span><br><span class="line"><span class="comment">#      uid: cloudwatch</span></span><br><span class="line"><span class="comment">#      editable: false</span></span><br><span class="line"><span class="comment">#      jsonData:</span></span><br><span class="line"><span class="comment">#        authType: default</span></span><br><span class="line"><span class="comment">#        defaultRegion: us-east-1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Configure grafana alerting (can be templated)</span></span><br><span class="line"><span class="comment">## ref: http://docs.grafana.org/administration/provisioning/#alerting</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="attr">alerting:</span> &#123;&#125;</span><br><span class="line">  <span class="comment"># rules.yaml:</span></span><br><span class="line">  <span class="comment">#   apiVersion: 1</span></span><br><span class="line">  <span class="comment">#   groups:</span></span><br><span class="line">  <span class="comment">#     - orgId: 1</span></span><br><span class="line">  <span class="comment">#       name: &#x27;&#123;&#123; .Chart.Name &#125;&#125;_my_rule_group&#x27;</span></span><br><span class="line">  <span class="comment">#       folder: my_first_folder</span></span><br><span class="line">  <span class="comment">#       interval: 60s</span></span><br><span class="line">  <span class="comment">#       rules:</span></span><br><span class="line">  <span class="comment">#         - uid: my_id_1</span></span><br><span class="line">  <span class="comment">#           title: my_first_rule</span></span><br><span class="line">  <span class="comment">#           condition: A</span></span><br><span class="line">  <span class="comment">#           data:</span></span><br><span class="line">  <span class="comment">#             - refId: A</span></span><br><span class="line">  <span class="comment">#               datasourceUid: &#x27;-100&#x27;</span></span><br><span class="line">  <span class="comment">#               model:</span></span><br><span class="line">  <span class="comment">#                 conditions:</span></span><br><span class="line">  <span class="comment">#                   - evaluator:</span></span><br><span class="line">  <span class="comment">#                       params:</span></span><br><span class="line">  <span class="comment">#                         - 3</span></span><br><span class="line">  <span class="comment">#                       type: gt</span></span><br><span class="line">  <span class="comment">#                     operator:</span></span><br><span class="line">  <span class="comment">#                       type: and</span></span><br><span class="line">  <span class="comment">#                     query:</span></span><br><span class="line">  <span class="comment">#                       params:</span></span><br><span class="line">  <span class="comment">#                         - A</span></span><br><span class="line">  <span class="comment">#                     reducer:</span></span><br><span class="line">  <span class="comment">#                       type: last</span></span><br><span class="line">  <span class="comment">#                     type: query</span></span><br><span class="line">  <span class="comment">#                 datasource:</span></span><br><span class="line">  <span class="comment">#                   type: __expr__</span></span><br><span class="line">  <span class="comment">#                   uid: &#x27;-100&#x27;</span></span><br><span class="line">  <span class="comment">#                 expression: 1==0</span></span><br><span class="line">  <span class="comment">#                 intervalMs: 1000</span></span><br><span class="line">  <span class="comment">#                 maxDataPoints: 43200</span></span><br><span class="line">  <span class="comment">#                 refId: A</span></span><br><span class="line">  <span class="comment">#                 type: math</span></span><br><span class="line">  <span class="comment">#           dashboardUid: my_dashboard</span></span><br><span class="line">  <span class="comment">#           panelId: 123</span></span><br><span class="line">  <span class="comment">#           noDataState: Alerting</span></span><br><span class="line">  <span class="comment">#           for: 60s</span></span><br><span class="line">  <span class="comment">#           annotations:</span></span><br><span class="line">  <span class="comment">#             some_key: some_value</span></span><br><span class="line">  <span class="comment">#           labels:</span></span><br><span class="line">  <span class="comment">#             team: sre_team_1</span></span><br><span class="line">  <span class="comment"># contactpoints.yaml:</span></span><br><span class="line">  <span class="comment">#   apiVersion: 1</span></span><br><span class="line">  <span class="comment">#   contactPoints:</span></span><br><span class="line">  <span class="comment">#     - orgId: 1</span></span><br><span class="line">  <span class="comment">#       name: cp_1</span></span><br><span class="line">  <span class="comment">#       receivers:</span></span><br><span class="line">  <span class="comment">#         - uid: first_uid</span></span><br><span class="line">  <span class="comment">#           type: pagerduty</span></span><br><span class="line">  <span class="comment">#           settings:</span></span><br><span class="line">  <span class="comment">#             integrationKey: XXX</span></span><br><span class="line">  <span class="comment">#             severity: critical</span></span><br><span class="line">  <span class="comment">#             class: ping failure</span></span><br><span class="line">  <span class="comment">#             component: Grafana</span></span><br><span class="line">  <span class="comment">#             group: app-stack</span></span><br><span class="line">  <span class="comment">#             summary: |</span></span><br><span class="line">  <span class="comment">#               &#123;&#123; `&#123;&#123; include &quot;default.message&quot; . &#125;&#125;` &#125;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Configure notifiers</span></span><br><span class="line"><span class="comment">## ref: http://docs.grafana.org/administration/provisioning/#alert-notification-channels</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="attr">notifiers:</span> &#123;&#125;</span><br><span class="line"><span class="comment">#  notifiers.yaml:</span></span><br><span class="line"><span class="comment">#    notifiers:</span></span><br><span class="line"><span class="comment">#    - name: email-notifier</span></span><br><span class="line"><span class="comment">#      type: email</span></span><br><span class="line"><span class="comment">#      uid: email1</span></span><br><span class="line"><span class="comment">#      # either:</span></span><br><span class="line"><span class="comment">#      org_id: 1</span></span><br><span class="line"><span class="comment">#      # or</span></span><br><span class="line"><span class="comment">#      org_name: Main Org.</span></span><br><span class="line"><span class="comment">#      is_default: true</span></span><br><span class="line"><span class="comment">#      settings:</span></span><br><span class="line"><span class="comment">#        addresses: an_email_address@example.com</span></span><br><span class="line"><span class="comment">#    delete_notifiers:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Configure grafana dashboard providers</span></span><br><span class="line"><span class="comment">## ref: http://docs.grafana.org/administration/provisioning/#dashboards</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## `path` must be /var/lib/grafana/dashboards/&lt;provider_name&gt;</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="attr">dashboardProviders:</span> &#123;&#125;</span><br><span class="line"><span class="comment">#  dashboardproviders.yaml:</span></span><br><span class="line"><span class="comment">#    apiVersion: 1</span></span><br><span class="line"><span class="comment">#    providers:</span></span><br><span class="line"><span class="comment">#    - name: &#x27;default&#x27;</span></span><br><span class="line"><span class="comment">#      orgId: 1</span></span><br><span class="line"><span class="comment">#      folder: &#x27;&#x27;</span></span><br><span class="line"><span class="comment">#      type: file</span></span><br><span class="line"><span class="comment">#      disableDeletion: false</span></span><br><span class="line"><span class="comment">#      editable: true</span></span><br><span class="line"><span class="comment">#      options:</span></span><br><span class="line"><span class="comment">#        path: /var/lib/grafana/dashboards/default</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Configure grafana dashboard to import</span></span><br><span class="line"><span class="comment">## <span class="doctag">NOTE:</span> To use dashboards you must also enable/configure dashboardProviders</span></span><br><span class="line"><span class="comment">## ref: https://grafana.com/dashboards</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## dashboards per provider, use provider name as key.</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="attr">dashboards:</span> &#123;&#125;</span><br><span class="line">  <span class="comment"># default:</span></span><br><span class="line">  <span class="comment">#   some-dashboard:</span></span><br><span class="line">  <span class="comment">#     json: |</span></span><br><span class="line">  <span class="comment">#       $RAW_JSON</span></span><br><span class="line">  <span class="comment">#   custom-dashboard:</span></span><br><span class="line">  <span class="comment">#     file: dashboards/custom-dashboard.json</span></span><br><span class="line">  <span class="comment">#   prometheus-stats:</span></span><br><span class="line">  <span class="comment">#     gnetId: 2</span></span><br><span class="line">  <span class="comment">#     revision: 2</span></span><br><span class="line">  <span class="comment">#     datasource: Prometheus</span></span><br><span class="line">  <span class="comment">#   local-dashboard:</span></span><br><span class="line">  <span class="comment">#     url: https://example.com/repository/test.json</span></span><br><span class="line">  <span class="comment">#     token: &#x27;&#x27;</span></span><br><span class="line">  <span class="comment">#   local-dashboard-base64:</span></span><br><span class="line">  <span class="comment">#     url: https://example.com/repository/test-b64.json</span></span><br><span class="line">  <span class="comment">#     token: &#x27;&#x27;</span></span><br><span class="line">  <span class="comment">#     b64content: true</span></span><br><span class="line">  <span class="comment">#   local-dashboard-gitlab:</span></span><br><span class="line">  <span class="comment">#     url: https://example.com/repository/test-gitlab.json</span></span><br><span class="line">  <span class="comment">#     gitlabToken: &#x27;&#x27;</span></span><br><span class="line">  <span class="comment">#   local-dashboard-bitbucket:</span></span><br><span class="line">  <span class="comment">#     url: https://example.com/repository/test-bitbucket.json</span></span><br><span class="line">  <span class="comment">#     bearerToken: &#x27;&#x27;</span></span><br><span class="line">  <span class="comment">#   local-dashboard-azure:</span></span><br><span class="line">  <span class="comment">#     url: https://example.com/repository/test-azure.json</span></span><br><span class="line">  <span class="comment">#     basic: &#x27;&#x27;</span></span><br><span class="line">  <span class="comment">#     acceptHeader: &#x27;*/*&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Reference to external ConfigMap per provider. Use provider name as key and ConfigMap name as value.</span></span><br><span class="line"><span class="comment">## A provider dashboards must be defined either by external ConfigMaps or in values.yaml, not in both.</span></span><br><span class="line"><span class="comment">## ConfigMap data example:</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## data:</span></span><br><span class="line"><span class="comment">##   example-dashboard.json: |</span></span><br><span class="line"><span class="comment">##     RAW_JSON</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="attr">dashboardsConfigMaps:</span> &#123;&#125;</span><br><span class="line"><span class="comment">#  default: &quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Grafana&#x27;s primary configuration</span></span><br><span class="line"><span class="comment">## <span class="doctag">NOTE:</span> values in map will be converted to ini format</span></span><br><span class="line"><span class="comment">## ref: http://docs.grafana.org/installation/configuration/</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="attr">grafana.ini:</span></span><br><span class="line">  <span class="attr">paths:</span></span><br><span class="line">    <span class="attr">data:</span> <span class="string">/var/lib/grafana/</span></span><br><span class="line">    <span class="attr">logs:</span> <span class="string">/var/log/grafana</span></span><br><span class="line">    <span class="attr">plugins:</span> <span class="string">/var/lib/grafana/plugins</span></span><br><span class="line">    <span class="attr">provisioning:</span> <span class="string">/etc/grafana/provisioning</span></span><br><span class="line">  <span class="attr">analytics:</span></span><br><span class="line">    <span class="attr">check_for_updates:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">log:</span></span><br><span class="line">    <span class="attr">mode:</span> <span class="string">console</span></span><br><span class="line">  <span class="attr">grafana_net:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">https://grafana.net</span></span><br><span class="line">  <span class="attr">server:</span></span><br><span class="line">    <span class="attr">domain:</span> <span class="string">&quot;<span class="template-variable">&#123;&#123; if (and .Values.ingress.enabled .Values.ingress.hosts) &#125;&#125;</span><span class="template-variable">&#123;&#123; .Values.ingress.hosts | first &#125;&#125;</span><span class="template-variable">&#123;&#123; else &#125;&#125;</span>&#x27;&#x27;<span class="template-variable">&#123;&#123; end &#125;&#125;</span>&quot;</span></span><br><span class="line"><span class="comment">## grafana Authentication can be enabled with the following values on grafana.ini</span></span><br><span class="line"> <span class="comment"># server:</span></span><br><span class="line">      <span class="comment"># The full public facing url you use in browser, used for redirects and emails</span></span><br><span class="line"> <span class="comment">#    root_url:</span></span><br><span class="line"> <span class="comment"># https://grafana.com/docs/grafana/latest/auth/github/#enable-github-in-grafana</span></span><br><span class="line"> <span class="comment"># auth.github:</span></span><br><span class="line"> <span class="comment">#    enabled: false</span></span><br><span class="line"> <span class="comment">#    allow_sign_up: false</span></span><br><span class="line"> <span class="comment">#    scopes: user:email,read:org</span></span><br><span class="line"> <span class="comment">#    auth_url: https://github.com/login/oauth/authorize</span></span><br><span class="line"> <span class="comment">#    token_url: https://github.com/login/oauth/access_token</span></span><br><span class="line"> <span class="comment">#    api_url: https://api.github.com/user</span></span><br><span class="line"> <span class="comment">#    team_ids:</span></span><br><span class="line"> <span class="comment">#    allowed_organizations:</span></span><br><span class="line"> <span class="comment">#    client_id:</span></span><br><span class="line"> <span class="comment">#    client_secret:</span></span><br><span class="line"><span class="comment">## LDAP Authentication can be enabled with the following values on grafana.ini</span></span><br><span class="line"><span class="comment">## <span class="doctag">NOTE:</span> Grafana will fail to start if the value for ldap.toml is invalid</span></span><br><span class="line">  <span class="comment"># auth.ldap:</span></span><br><span class="line">  <span class="comment">#   enabled: true</span></span><br><span class="line">  <span class="comment">#   allow_sign_up: true</span></span><br><span class="line">  <span class="comment">#   config_file: /etc/grafana/ldap.toml</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Grafana&#x27;s LDAP configuration</span></span><br><span class="line"><span class="comment">## Templated by the template in _helpers.tpl</span></span><br><span class="line"><span class="comment">## <span class="doctag">NOTE:</span> To enable the grafana.ini must be configured with auth.ldap.enabled</span></span><br><span class="line"><span class="comment">## ref: http://docs.grafana.org/installation/configuration/#auth-ldap</span></span><br><span class="line"><span class="comment">## ref: http://docs.grafana.org/installation/ldap/#configuration</span></span><br><span class="line"><span class="attr">ldap:</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># `existingSecret` is a reference to an existing secret containing the ldap configuration</span></span><br><span class="line">  <span class="comment"># for Grafana in a key `ldap-toml`.</span></span><br><span class="line">  <span class="attr">existingSecret:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="comment"># `config` is the content of `ldap.toml` that will be stored in the created secret</span></span><br><span class="line">  <span class="attr">config:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="comment"># config: |-</span></span><br><span class="line">  <span class="comment">#   verbose_logging = true</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#   [[servers]]</span></span><br><span class="line">  <span class="comment">#   host = &quot;my-ldap-server&quot;</span></span><br><span class="line">  <span class="comment">#   port = 636</span></span><br><span class="line">  <span class="comment">#   use_ssl = true</span></span><br><span class="line">  <span class="comment">#   start_tls = false</span></span><br><span class="line">  <span class="comment">#   ssl_skip_verify = false</span></span><br><span class="line">  <span class="comment">#   bind_dn = &quot;uid=%s,ou=users,dc=myorg,dc=com&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Grafana&#x27;s SMTP configuration</span></span><br><span class="line"><span class="comment">## <span class="doctag">NOTE:</span> To enable, grafana.ini must be configured with smtp.enabled</span></span><br><span class="line"><span class="comment">## ref: http://docs.grafana.org/installation/configuration/#smtp</span></span><br><span class="line"><span class="attr">smtp:</span></span><br><span class="line">  <span class="comment"># `existingSecret` is a reference to an existing secret containing the smtp configuration</span></span><br><span class="line">  <span class="comment"># for Grafana.</span></span><br><span class="line">  <span class="attr">existingSecret:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="attr">userKey:</span> <span class="string">&quot;user&quot;</span></span><br><span class="line">  <span class="attr">passwordKey:</span> <span class="string">&quot;password&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Sidecars that collect the configmaps with specified label and stores the included files them into the respective folders</span></span><br><span class="line"><span class="comment">## Requires at least Grafana 5 to work and can&#x27;t be used together with parameters dashboardProviders, datasources and dashboards</span></span><br><span class="line"><span class="attr">sidecar:</span></span><br><span class="line">  <span class="attr">image:</span></span><br><span class="line">    <span class="attr">repository:</span> <span class="string">quay.io/kiwigrid/k8s-sidecar</span></span><br><span class="line">    <span class="attr">tag:</span> <span class="number">1.22</span><span class="number">.0</span></span><br><span class="line">    <span class="attr">sha:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="attr">imagePullPolicy:</span> <span class="string">IfNotPresent</span></span><br><span class="line">  <span class="attr">resources:</span> &#123;&#125;</span><br><span class="line"><span class="comment">#   limits:</span></span><br><span class="line"><span class="comment">#     cpu: 100m</span></span><br><span class="line"><span class="comment">#     memory: 100Mi</span></span><br><span class="line"><span class="comment">#   requests:</span></span><br><span class="line"><span class="comment">#     cpu: 50m</span></span><br><span class="line"><span class="comment">#     memory: 50Mi</span></span><br><span class="line">  <span class="attr">securityContext:</span></span><br><span class="line">    <span class="attr">allowPrivilegeEscalation:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">capabilities:</span></span><br><span class="line">      <span class="attr">drop:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ALL</span></span><br><span class="line">    <span class="attr">seccompProfile:</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">RuntimeDefault</span></span><br><span class="line">  <span class="comment"># skipTlsVerify Set to true to skip tls verification for kube api calls</span></span><br><span class="line">  <span class="comment"># skipTlsVerify: true</span></span><br><span class="line">  <span class="attr">enableUniqueFilenames:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">readinessProbe:</span> &#123;&#125;</span><br><span class="line">  <span class="attr">livenessProbe:</span> &#123;&#125;</span><br><span class="line">  <span class="comment"># Log level default for all sidecars. Can be one of: DEBUG, INFO, WARN, ERROR, CRITICAL. Defaults to INFO</span></span><br><span class="line">  <span class="comment"># logLevel: INFO</span></span><br><span class="line">  <span class="attr">alerts:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># Additional environment variables for the alerts sidecar</span></span><br><span class="line">    <span class="attr">env:</span> &#123;&#125;</span><br><span class="line">    <span class="comment"># Do not reprocess already processed unchanged resources on k8s API reconnect.</span></span><br><span class="line">    <span class="comment"># ignoreAlreadyProcessed: true</span></span><br><span class="line">    <span class="comment"># label that the configmaps with alert are marked with</span></span><br><span class="line">    <span class="attr">label:</span> <span class="string">grafana_alert</span></span><br><span class="line">    <span class="comment"># value of label that the configmaps with alert are set to</span></span><br><span class="line">    <span class="attr">labelValue:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="comment"># Log level. Can be one of: DEBUG, INFO, WARN, ERROR, CRITICAL.</span></span><br><span class="line">    <span class="comment"># logLevel: INFO</span></span><br><span class="line">    <span class="comment"># If specified, the sidecar will search for alert config-maps inside this namespace.</span></span><br><span class="line">    <span class="comment"># Otherwise the namespace in which the sidecar is running will be used.</span></span><br><span class="line">    <span class="comment"># It&#x27;s also possible to specify ALL to search in all namespaces</span></span><br><span class="line">    <span class="attr">searchNamespace:</span> <span class="literal">null</span></span><br><span class="line">    <span class="comment"># Method to use to detect ConfigMap changes. With WATCH the sidecar will do a WATCH requests, with SLEEP it will list all ConfigMaps, then sleep for 60 seconds.</span></span><br><span class="line">    <span class="attr">watchMethod:</span> <span class="string">WATCH</span></span><br><span class="line">    <span class="comment"># search in configmap, secret or both</span></span><br><span class="line">    <span class="attr">resource:</span> <span class="string">both</span></span><br><span class="line">    <span class="comment"># watchServerTimeout: request to the server, asking it to cleanly close the connection after that.</span></span><br><span class="line">    <span class="comment"># defaults to 60sec; much higher values like 3600 seconds (1h) are feasible for non-Azure K8S</span></span><br><span class="line">    <span class="comment"># watchServerTimeout: 3600</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment"># watchClientTimeout: is a client-side timeout, configuring your local socket.</span></span><br><span class="line">    <span class="comment"># If you have a network outage dropping all packets with no RST/FIN,</span></span><br><span class="line">    <span class="comment"># this is how long your client waits before realizing &amp; dropping the connection.</span></span><br><span class="line">    <span class="comment"># defaults to 66sec (sic!)</span></span><br><span class="line">    <span class="comment"># watchClientTimeout: 60</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment"># Endpoint to send request to reload alerts</span></span><br><span class="line">    <span class="attr">reloadURL:</span> <span class="string">&quot;http://localhost:3000/api/admin/provisioning/alerting/reload&quot;</span></span><br><span class="line">    <span class="comment"># Absolute path to shell script to execute after a alert got reloaded</span></span><br><span class="line">    <span class="attr">script:</span> <span class="literal">null</span></span><br><span class="line">    <span class="attr">skipReload:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># Deploy the alert sidecar as an initContainer in addition to a container.</span></span><br><span class="line">    <span class="comment"># Sets the size limit of the alert sidecar emptyDir volume</span></span><br><span class="line">    <span class="attr">sizeLimit:</span> &#123;&#125;</span><br><span class="line">  <span class="attr">dashboards:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># Additional environment variables for the dashboards sidecar</span></span><br><span class="line">    <span class="attr">env:</span> &#123;&#125;</span><br><span class="line">    <span class="comment"># Do not reprocess already processed unchanged resources on k8s API reconnect.</span></span><br><span class="line">    <span class="comment"># ignoreAlreadyProcessed: true</span></span><br><span class="line">    <span class="attr">SCProvider:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># label that the configmaps with dashboards are marked with</span></span><br><span class="line">    <span class="attr">label:</span> <span class="string">grafana_dashboard</span></span><br><span class="line">    <span class="comment"># value of label that the configmaps with dashboards are set to</span></span><br><span class="line">    <span class="attr">labelValue:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="comment"># Log level. Can be one of: DEBUG, INFO, WARN, ERROR, CRITICAL.</span></span><br><span class="line">    <span class="comment"># logLevel: INFO</span></span><br><span class="line">    <span class="comment"># folder in the pod that should hold the collected dashboards (unless `defaultFolderName` is set)</span></span><br><span class="line">    <span class="attr">folder:</span> <span class="string">/tmp/dashboards</span></span><br><span class="line">    <span class="comment"># The default folder name, it will create a subfolder under the `folder` and put dashboards in there instead</span></span><br><span class="line">    <span class="attr">defaultFolderName:</span> <span class="literal">null</span></span><br><span class="line">    <span class="comment"># Namespaces list. If specified, the sidecar will search for config-maps/secrets inside these namespaces.</span></span><br><span class="line">    <span class="comment"># Otherwise the namespace in which the sidecar is running will be used.</span></span><br><span class="line">    <span class="comment"># It&#x27;s also possible to specify ALL to search in all namespaces.</span></span><br><span class="line">    <span class="attr">searchNamespace:</span> <span class="literal">null</span></span><br><span class="line">    <span class="comment"># Method to use to detect ConfigMap changes. With WATCH the sidecar will do a WATCH requests, with SLEEP it will list all ConfigMaps, then sleep for 60 seconds.</span></span><br><span class="line">    <span class="attr">watchMethod:</span> <span class="string">WATCH</span></span><br><span class="line">    <span class="comment"># search in configmap, secret or both</span></span><br><span class="line">    <span class="attr">resource:</span> <span class="string">both</span></span><br><span class="line">    <span class="comment"># If specified, the sidecar will look for annotation with this name to create folder and put graph here.</span></span><br><span class="line">    <span class="comment"># You can use this parameter together with `provider.foldersFromFilesStructure`to annotate configmaps and create folder structure.</span></span><br><span class="line">    <span class="attr">folderAnnotation:</span> <span class="literal">null</span></span><br><span class="line">    <span class="comment"># Endpoint to send request to reload alerts</span></span><br><span class="line">    <span class="attr">reloadURL:</span> <span class="string">&quot;http://localhost:3000/api/admin/provisioning/dashboards/reload&quot;</span></span><br><span class="line">    <span class="comment"># Absolute path to shell script to execute after a configmap got reloaded</span></span><br><span class="line">    <span class="attr">script:</span> <span class="literal">null</span></span><br><span class="line">    <span class="attr">skipReload:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># watchServerTimeout: request to the server, asking it to cleanly close the connection after that.</span></span><br><span class="line">    <span class="comment"># defaults to 60sec; much higher values like 3600 seconds (1h) are feasible for non-Azure K8S</span></span><br><span class="line">    <span class="comment"># watchServerTimeout: 3600</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment"># watchClientTimeout: is a client-side timeout, configuring your local socket.</span></span><br><span class="line">    <span class="comment"># If you have a network outage dropping all packets with no RST/FIN,</span></span><br><span class="line">    <span class="comment"># this is how long your client waits before realizing &amp; dropping the connection.</span></span><br><span class="line">    <span class="comment"># defaults to 66sec (sic!)</span></span><br><span class="line">    <span class="comment"># watchClientTimeout: 60</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment"># provider configuration that lets grafana manage the dashboards</span></span><br><span class="line">    <span class="attr">provider:</span></span><br><span class="line">      <span class="comment"># name of the provider, should be unique</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">sidecarProvider</span></span><br><span class="line">      <span class="comment"># orgid as configured in grafana</span></span><br><span class="line">      <span class="attr">orgid:</span> <span class="number">1</span></span><br><span class="line">      <span class="comment"># folder in which the dashboards should be imported in grafana</span></span><br><span class="line">      <span class="attr">folder:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">      <span class="comment"># type of the provider</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">file</span></span><br><span class="line">      <span class="comment"># disableDelete to activate a import-only behaviour</span></span><br><span class="line">      <span class="attr">disableDelete:</span> <span class="literal">false</span></span><br><span class="line">      <span class="comment"># allow updating provisioned dashboards from the UI</span></span><br><span class="line">      <span class="attr">allowUiUpdates:</span> <span class="literal">false</span></span><br><span class="line">      <span class="comment"># allow Grafana to replicate dashboard structure from filesystem</span></span><br><span class="line">      <span class="attr">foldersFromFilesStructure:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># Additional dashboard sidecar volume mounts</span></span><br><span class="line">    <span class="attr">extraMounts:</span> []</span><br><span class="line">    <span class="comment"># Sets the size limit of the dashboard sidecar emptyDir volume</span></span><br><span class="line">    <span class="attr">sizeLimit:</span> &#123;&#125;</span><br><span class="line">  <span class="attr">datasources:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># Additional environment variables for the datasourcessidecar</span></span><br><span class="line">    <span class="attr">env:</span> &#123;&#125;</span><br><span class="line">    <span class="comment"># Do not reprocess already processed unchanged resources on k8s API reconnect.</span></span><br><span class="line">    <span class="comment"># ignoreAlreadyProcessed: true</span></span><br><span class="line">    <span class="comment"># label that the configmaps with datasources are marked with</span></span><br><span class="line">    <span class="attr">label:</span> <span class="string">grafana_datasource</span></span><br><span class="line">    <span class="comment"># value of label that the configmaps with datasources are set to</span></span><br><span class="line">    <span class="attr">labelValue:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="comment"># Log level. Can be one of: DEBUG, INFO, WARN, ERROR, CRITICAL.</span></span><br><span class="line">    <span class="comment"># logLevel: INFO</span></span><br><span class="line">    <span class="comment"># If specified, the sidecar will search for datasource config-maps inside this namespace.</span></span><br><span class="line">    <span class="comment"># Otherwise the namespace in which the sidecar is running will be used.</span></span><br><span class="line">    <span class="comment"># It&#x27;s also possible to specify ALL to search in all namespaces</span></span><br><span class="line">    <span class="attr">searchNamespace:</span> <span class="literal">null</span></span><br><span class="line">    <span class="comment"># Method to use to detect ConfigMap changes. With WATCH the sidecar will do a WATCH requests, with SLEEP it will list all ConfigMaps, then sleep for 60 seconds.</span></span><br><span class="line">    <span class="attr">watchMethod:</span> <span class="string">WATCH</span></span><br><span class="line">    <span class="comment"># search in configmap, secret or both</span></span><br><span class="line">    <span class="attr">resource:</span> <span class="string">both</span></span><br><span class="line">    <span class="comment"># watchServerTimeout: request to the server, asking it to cleanly close the connection after that.</span></span><br><span class="line">    <span class="comment"># defaults to 60sec; much higher values like 3600 seconds (1h) are feasible for non-Azure K8S</span></span><br><span class="line">    <span class="comment"># watchServerTimeout: 3600</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment"># watchClientTimeout: is a client-side timeout, configuring your local socket.</span></span><br><span class="line">    <span class="comment"># If you have a network outage dropping all packets with no RST/FIN,</span></span><br><span class="line">    <span class="comment"># this is how long your client waits before realizing &amp; dropping the connection.</span></span><br><span class="line">    <span class="comment"># defaults to 66sec (sic!)</span></span><br><span class="line">    <span class="comment"># watchClientTimeout: 60</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment"># Endpoint to send request to reload datasources</span></span><br><span class="line">    <span class="attr">reloadURL:</span> <span class="string">&quot;http://localhost:3000/api/admin/provisioning/datasources/reload&quot;</span></span><br><span class="line">    <span class="comment"># Absolute path to shell script to execute after a datasource got reloaded</span></span><br><span class="line">    <span class="attr">script:</span> <span class="literal">null</span></span><br><span class="line">    <span class="attr">skipReload:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># Deploy the datasource sidecar as an initContainer in addition to a container.</span></span><br><span class="line">    <span class="comment"># This is needed if skipReload is true, to load any datasources defined at startup time.</span></span><br><span class="line">    <span class="attr">initDatasources:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># Sets the size limit of the datasource sidecar emptyDir volume</span></span><br><span class="line">    <span class="attr">sizeLimit:</span> &#123;&#125;</span><br><span class="line">  <span class="attr">plugins:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># Additional environment variables for the plugins sidecar</span></span><br><span class="line">    <span class="attr">env:</span> &#123;&#125;</span><br><span class="line">    <span class="comment"># Do not reprocess already processed unchanged resources on k8s API reconnect.</span></span><br><span class="line">    <span class="comment"># ignoreAlreadyProcessed: true</span></span><br><span class="line">    <span class="comment"># label that the configmaps with plugins are marked with</span></span><br><span class="line">    <span class="attr">label:</span> <span class="string">grafana_plugin</span></span><br><span class="line">    <span class="comment"># value of label that the configmaps with plugins are set to</span></span><br><span class="line">    <span class="attr">labelValue:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="comment"># Log level. Can be one of: DEBUG, INFO, WARN, ERROR, CRITICAL.</span></span><br><span class="line">    <span class="comment"># logLevel: INFO</span></span><br><span class="line">    <span class="comment"># If specified, the sidecar will search for plugin config-maps inside this namespace.</span></span><br><span class="line">    <span class="comment"># Otherwise the namespace in which the sidecar is running will be used.</span></span><br><span class="line">    <span class="comment"># It&#x27;s also possible to specify ALL to search in all namespaces</span></span><br><span class="line">    <span class="attr">searchNamespace:</span> <span class="literal">null</span></span><br><span class="line">    <span class="comment"># Method to use to detect ConfigMap changes. With WATCH the sidecar will do a WATCH requests, with SLEEP it will list all ConfigMaps, then sleep for 60 seconds.</span></span><br><span class="line">    <span class="attr">watchMethod:</span> <span class="string">WATCH</span></span><br><span class="line">    <span class="comment"># search in configmap, secret or both</span></span><br><span class="line">    <span class="attr">resource:</span> <span class="string">both</span></span><br><span class="line">    <span class="comment"># watchServerTimeout: request to the server, asking it to cleanly close the connection after that.</span></span><br><span class="line">    <span class="comment"># defaults to 60sec; much higher values like 3600 seconds (1h) are feasible for non-Azure K8S</span></span><br><span class="line">    <span class="comment"># watchServerTimeout: 3600</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment"># watchClientTimeout: is a client-side timeout, configuring your local socket.</span></span><br><span class="line">    <span class="comment"># If you have a network outage dropping all packets with no RST/FIN,</span></span><br><span class="line">    <span class="comment"># this is how long your client waits before realizing &amp; dropping the connection.</span></span><br><span class="line">    <span class="comment"># defaults to 66sec (sic!)</span></span><br><span class="line">    <span class="comment"># watchClientTimeout: 60</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment"># Endpoint to send request to reload plugins</span></span><br><span class="line">    <span class="attr">reloadURL:</span> <span class="string">&quot;http://localhost:3000/api/admin/provisioning/plugins/reload&quot;</span></span><br><span class="line">    <span class="comment"># Absolute path to shell script to execute after a plugin got reloaded</span></span><br><span class="line">    <span class="attr">script:</span> <span class="literal">null</span></span><br><span class="line">    <span class="attr">skipReload:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># Deploy the datasource sidecar as an initContainer in addition to a container.</span></span><br><span class="line">    <span class="comment"># This is needed if skipReload is true, to load any plugins defined at startup time.</span></span><br><span class="line">    <span class="attr">initPlugins:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># Sets the size limit of the plugin sidecar emptyDir volume</span></span><br><span class="line">    <span class="attr">sizeLimit:</span> &#123;&#125;</span><br><span class="line">  <span class="attr">notifiers:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># Additional environment variables for the notifierssidecar</span></span><br><span class="line">    <span class="attr">env:</span> &#123;&#125;</span><br><span class="line">    <span class="comment"># Do not reprocess already processed unchanged resources on k8s API reconnect.</span></span><br><span class="line">    <span class="comment"># ignoreAlreadyProcessed: true</span></span><br><span class="line">    <span class="comment"># label that the configmaps with notifiers are marked with</span></span><br><span class="line">    <span class="attr">label:</span> <span class="string">grafana_notifier</span></span><br><span class="line">    <span class="comment"># value of label that the configmaps with notifiers are set to</span></span><br><span class="line">    <span class="attr">labelValue:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="comment"># Log level. Can be one of: DEBUG, INFO, WARN, ERROR, CRITICAL.</span></span><br><span class="line">    <span class="comment"># logLevel: INFO</span></span><br><span class="line">    <span class="comment"># If specified, the sidecar will search for notifier config-maps inside this namespace.</span></span><br><span class="line">    <span class="comment"># Otherwise the namespace in which the sidecar is running will be used.</span></span><br><span class="line">    <span class="comment"># It&#x27;s also possible to specify ALL to search in all namespaces</span></span><br><span class="line">    <span class="attr">searchNamespace:</span> <span class="literal">null</span></span><br><span class="line">    <span class="comment"># Method to use to detect ConfigMap changes. With WATCH the sidecar will do a WATCH requests, with SLEEP it will list all ConfigMaps, then sleep for 60 seconds.</span></span><br><span class="line">    <span class="attr">watchMethod:</span> <span class="string">WATCH</span></span><br><span class="line">    <span class="comment"># search in configmap, secret or both</span></span><br><span class="line">    <span class="attr">resource:</span> <span class="string">both</span></span><br><span class="line">    <span class="comment"># watchServerTimeout: request to the server, asking it to cleanly close the connection after that.</span></span><br><span class="line">    <span class="comment"># defaults to 60sec; much higher values like 3600 seconds (1h) are feasible for non-Azure K8S</span></span><br><span class="line">    <span class="comment"># watchServerTimeout: 3600</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment"># watchClientTimeout: is a client-side timeout, configuring your local socket.</span></span><br><span class="line">    <span class="comment"># If you have a network outage dropping all packets with no RST/FIN,</span></span><br><span class="line">    <span class="comment"># this is how long your client waits before realizing &amp; dropping the connection.</span></span><br><span class="line">    <span class="comment"># defaults to 66sec (sic!)</span></span><br><span class="line">    <span class="comment"># watchClientTimeout: 60</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment"># Endpoint to send request to reload notifiers</span></span><br><span class="line">    <span class="attr">reloadURL:</span> <span class="string">&quot;http://localhost:3000/api/admin/provisioning/notifications/reload&quot;</span></span><br><span class="line">    <span class="comment"># Absolute path to shell script to execute after a notifier got reloaded</span></span><br><span class="line">    <span class="attr">script:</span> <span class="literal">null</span></span><br><span class="line">    <span class="attr">skipReload:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># Deploy the notifier sidecar as an initContainer in addition to a container.</span></span><br><span class="line">    <span class="comment"># This is needed if skipReload is true, to load any notifiers defined at startup time.</span></span><br><span class="line">    <span class="attr">initNotifiers:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># Sets the size limit of the notifier sidecar emptyDir volume</span></span><br><span class="line">    <span class="attr">sizeLimit:</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">## Override the deployment namespace</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="attr">namespaceOverride:</span> <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Number of old ReplicaSets to retain</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="attr">revisionHistoryLimit:</span> <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Add a seperate remote image renderer deployment/service</span></span><br><span class="line"><span class="attr">imageRenderer:</span></span><br><span class="line">  <span class="attr">deploymentStrategy:</span> &#123;&#125;</span><br><span class="line">  <span class="comment"># Enable the image-renderer deployment &amp; service</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">autoscaling:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">minReplicas:</span> <span class="number">1</span></span><br><span class="line">    <span class="attr">maxReplicas:</span> <span class="number">5</span></span><br><span class="line">    <span class="attr">targetCPU:</span> <span class="string">&quot;60&quot;</span></span><br><span class="line">    <span class="attr">targetMemory:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="attr">behavior:</span> &#123;&#125;</span><br><span class="line">  <span class="attr">image:</span></span><br><span class="line">    <span class="comment"># image-renderer Image repository</span></span><br><span class="line">    <span class="attr">repository:</span> <span class="string">docker.io/grafana/grafana-image-renderer</span></span><br><span class="line">    <span class="comment"># image-renderer Image tag</span></span><br><span class="line">    <span class="attr">tag:</span> <span class="string">latest</span></span><br><span class="line">    <span class="comment"># image-renderer Image sha (optional)</span></span><br><span class="line">    <span class="attr">sha:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="comment"># image-renderer ImagePullPolicy</span></span><br><span class="line">    <span class="attr">pullPolicy:</span> <span class="string">Always</span></span><br><span class="line">  <span class="comment"># extra environment variables</span></span><br><span class="line">  <span class="attr">env:</span></span><br><span class="line">    <span class="attr">HTTP_HOST:</span> <span class="string">&quot;0.0.0.0&quot;</span></span><br><span class="line">    <span class="comment"># RENDERING_ARGS: --no-sandbox,--disable-gpu,--window-size=1280x758</span></span><br><span class="line">    <span class="comment"># RENDERING_MODE: clustered</span></span><br><span class="line">    <span class="comment"># IGNORE_HTTPS_ERRORS: true</span></span><br><span class="line">  <span class="comment"># image-renderer deployment serviceAccount</span></span><br><span class="line">  <span class="attr">serviceAccountName:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="comment"># image-renderer deployment securityContext</span></span><br><span class="line">  <span class="attr">securityContext:</span> &#123;&#125;</span><br><span class="line">  <span class="comment"># image-renderer deployment container securityContext</span></span><br><span class="line">  <span class="attr">containerSecurityContext:</span></span><br><span class="line">    <span class="attr">seccompProfile:</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">RuntimeDefault</span></span><br><span class="line">    <span class="attr">capabilities:</span></span><br><span class="line">      <span class="attr">drop:</span> [<span class="string">&#x27;ALL&#x27;</span>]</span><br><span class="line">    <span class="attr">allowPrivilegeEscalation:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">readOnlyRootFilesystem:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># image-renderer deployment Host Aliases</span></span><br><span class="line">  <span class="attr">hostAliases:</span> []</span><br><span class="line">  <span class="comment"># image-renderer deployment priority class</span></span><br><span class="line">  <span class="attr">priorityClassName:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">service:</span></span><br><span class="line">    <span class="comment"># Enable the image-renderer service</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># image-renderer service port name</span></span><br><span class="line">    <span class="attr">portName:</span> <span class="string">&#x27;http&#x27;</span></span><br><span class="line">    <span class="comment"># image-renderer service port used by both service and deployment</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">8081</span></span><br><span class="line">    <span class="attr">targetPort:</span> <span class="number">8081</span></span><br><span class="line">    <span class="comment"># Adds the appProtocol field to the image-renderer service. This allows to work with istio protocol selection. Ex: &quot;http&quot; or &quot;tcp&quot;</span></span><br><span class="line">    <span class="attr">appProtocol:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="attr">serviceMonitor:</span></span><br><span class="line">    <span class="comment">## If true, a ServiceMonitor CRD is created for a prometheus operator</span></span><br><span class="line">    <span class="comment">## https://github.com/coreos/prometheus-operator</span></span><br><span class="line">    <span class="comment">##</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">/metrics</span></span><br><span class="line">    <span class="comment">#  namespace: monitoring  (defaults to use the namespace this chart is deployed to)</span></span><br><span class="line">    <span class="attr">labels:</span> &#123;&#125;</span><br><span class="line">    <span class="attr">interval:</span> <span class="string">1m</span></span><br><span class="line">    <span class="attr">scheme:</span> <span class="string">http</span></span><br><span class="line">    <span class="attr">tlsConfig:</span> &#123;&#125;</span><br><span class="line">    <span class="attr">scrapeTimeout:</span> <span class="string">30s</span></span><br><span class="line">    <span class="attr">relabelings:</span> []</span><br><span class="line">    <span class="comment"># See: https://doc.crds.dev/github.com/prometheus-operator/kube-prometheus/monitoring.coreos.com/ServiceMonitor/v1@v0.11.0#spec-targetLabels</span></span><br><span class="line">    <span class="attr">targetLabels:</span> []</span><br><span class="line">      <span class="comment"># - targetLabel1</span></span><br><span class="line">      <span class="comment"># - targetLabel2</span></span><br><span class="line">  <span class="comment"># If https is enabled in Grafana, this needs to be set as &#x27;https&#x27; to correctly configure the callback used in Grafana</span></span><br><span class="line">  <span class="attr">grafanaProtocol:</span> <span class="string">http</span></span><br><span class="line">  <span class="comment"># In case a sub_path is used this needs to be added to the image renderer callback</span></span><br><span class="line">  <span class="attr">grafanaSubPath:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="comment"># name of the image-renderer port on the pod</span></span><br><span class="line">  <span class="attr">podPortName:</span> <span class="string">http</span></span><br><span class="line">  <span class="comment"># number of image-renderer replica sets to keep</span></span><br><span class="line">  <span class="attr">revisionHistoryLimit:</span> <span class="number">10</span></span><br><span class="line">  <span class="attr">networkPolicy:</span></span><br><span class="line">    <span class="comment"># Enable a NetworkPolicy to limit inbound traffic to only the created grafana pods</span></span><br><span class="line">    <span class="attr">limitIngress:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Enable a NetworkPolicy to limit outbound traffic to only the created grafana pods</span></span><br><span class="line">    <span class="attr">limitEgress:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># Allow additional services to access image-renderer (eg. Prometheus operator when ServiceMonitor is enabled)</span></span><br><span class="line">    <span class="attr">extraIngressSelectors:</span> []</span><br><span class="line">  <span class="attr">resources:</span> &#123;&#125;</span><br><span class="line"><span class="comment">#   limits:</span></span><br><span class="line"><span class="comment">#     cpu: 100m</span></span><br><span class="line"><span class="comment">#     memory: 100Mi</span></span><br><span class="line"><span class="comment">#   requests:</span></span><br><span class="line"><span class="comment">#     cpu: 50m</span></span><br><span class="line"><span class="comment">#     memory: 50Mi</span></span><br><span class="line">  <span class="comment">## Node labels for pod assignment</span></span><br><span class="line">  <span class="comment">## ref: https://kubernetes.io/docs/user-guide/node-selection/</span></span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">  <span class="attr">nodeSelector:</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">## Tolerations for pod assignment</span></span><br><span class="line">  <span class="comment">## ref: https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/</span></span><br><span class="line">  <span class="comment">##</span></span><br><span class="line">  <span class="attr">tolerations:</span> []</span><br><span class="line"></span><br><span class="line">  <span class="comment">## Affinity for pod assignment (evaluated as template)</span></span><br><span class="line">  <span class="comment">## ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity</span></span><br><span class="line">  <span class="comment">##</span></span><br><span class="line">  <span class="attr">affinity:</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">## Use an alternate scheduler, e.g. &quot;stork&quot;.</span></span><br><span class="line">  <span class="comment">## ref: https://kubernetes.io/docs/tasks/administer-cluster/configure-multiple-schedulers/</span></span><br><span class="line">  <span class="comment">##</span></span><br><span class="line">  <span class="comment"># schedulerName: &quot;default-scheduler&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">networkPolicy:</span></span><br><span class="line">  <span class="comment">## @param networkPolicy.enabled Enable creation of NetworkPolicy resources. Only Ingress traffic is filtered for now.</span></span><br><span class="line">  <span class="comment">##</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment">## @param networkPolicy.allowExternal Don&#x27;t require client label for connections</span></span><br><span class="line">  <span class="comment">## The Policy model to apply. When set to false, only pods with the correct</span></span><br><span class="line">  <span class="comment">## client label will have network access to  grafana port defined.</span></span><br><span class="line">  <span class="comment">## When true, grafana will accept connections from any source</span></span><br><span class="line">  <span class="comment">## (with the correct destination port).</span></span><br><span class="line">  <span class="comment">##</span></span><br><span class="line">  <span class="attr">ingress:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment">## @param networkPolicy.ingress When true enables the creation</span></span><br><span class="line">  <span class="comment">## an ingress network policy</span></span><br><span class="line">  <span class="comment">##</span></span><br><span class="line">  <span class="attr">allowExternal:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment">## @param networkPolicy.explicitNamespacesSelector A Kubernetes LabelSelector to explicitly select namespaces from which traffic could be allowed</span></span><br><span class="line">  <span class="comment">## If explicitNamespacesSelector is missing or set to &#123;&#125;, only client Pods that are in the networkPolicy&#x27;s namespace</span></span><br><span class="line">  <span class="comment">## and that match other criteria, the ones that have the good label, can reach the grafana.</span></span><br><span class="line">  <span class="comment">## But sometimes, we want the grafana to be accessible to clients from other namespaces, in this case, we can use this</span></span><br><span class="line">  <span class="comment">## LabelSelector to select these namespaces, note that the networkPolicy&#x27;s namespace should also be explicitly added.</span></span><br><span class="line">  <span class="comment">##</span></span><br><span class="line">  <span class="comment">## Example:</span></span><br><span class="line">  <span class="comment">## explicitNamespacesSelector:</span></span><br><span class="line">  <span class="comment">##   matchLabels:</span></span><br><span class="line">  <span class="comment">##     role: frontend</span></span><br><span class="line">  <span class="comment">##   matchExpressions:</span></span><br><span class="line">  <span class="comment">##    - &#123;key: role, operator: In, values: [frontend]&#125;</span></span><br><span class="line">  <span class="comment">##</span></span><br><span class="line">  <span class="attr">explicitNamespacesSelector:</span> &#123;&#125;</span><br><span class="line">  <span class="comment">##</span></span><br><span class="line">  <span class="comment">##</span></span><br><span class="line">  <span class="comment">##</span></span><br><span class="line">  <span class="comment">##</span></span><br><span class="line">  <span class="comment">##</span></span><br><span class="line">  <span class="comment">##</span></span><br><span class="line">  <span class="attr">egress:</span></span><br><span class="line">    <span class="comment">## @param networkPolicy.egress.enabled When enabled, an egress network policy will be</span></span><br><span class="line">    <span class="comment">## created allowing grafana to connect to external data sources from kubernetes cluster.</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment">##</span></span><br><span class="line">    <span class="comment">## @param networkPolicy.egress.ports Add individual ports to be allowed by the egress</span></span><br><span class="line">    <span class="attr">ports:</span> []</span><br><span class="line">    <span class="comment">## Add ports to the egress by specifying - port: &lt;port number&gt;</span></span><br><span class="line">    <span class="comment">## E.X.</span></span><br><span class="line">    <span class="comment">## ports:</span></span><br><span class="line">      <span class="comment">## - port: 80</span></span><br><span class="line">      <span class="comment">## - port: 443</span></span><br><span class="line">  <span class="comment">##</span></span><br><span class="line">  <span class="comment">##</span></span><br><span class="line">  <span class="comment">##</span></span><br><span class="line">  <span class="comment">##</span></span><br><span class="line">  <span class="comment">##</span></span><br><span class="line">  <span class="comment">##</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable backward compatibility of kubernetes where version below 1.13 doesn&#x27;t have the enableServiceLinks option</span></span><br><span class="line"><span class="attr">enableKubeBackwardCompatibility:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">useStatefulSet:</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># Create a dynamic manifests via values:</span></span><br><span class="line"><span class="attr">extraObjects:</span> []</span><br><span class="line">  <span class="comment"># - apiVersion: &quot;kubernetes-client.io/v1&quot;</span></span><br><span class="line">  <span class="comment">#   kind: ExternalSecret</span></span><br><span class="line">  <span class="comment">#   metadata:</span></span><br><span class="line">  <span class="comment">#     name: grafana-secrets</span></span><br><span class="line">  <span class="comment">#   spec:</span></span><br><span class="line">  <span class="comment">#     backendType: gcpSecretsManager</span></span><br><span class="line">  <span class="comment">#     data:</span></span><br><span class="line">  <span class="comment">#       - key: grafana-admin-password</span></span><br><span class="line">  <span class="comment">#         name: adminPassword</span></span><br></pre></td></tr></table></figure>
</details>
<h2 id="设置pvc">设置pvc</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">$ sudo vim grafana/values.yaml</span><br><span class="line">...</span><br><span class="line">persistence:</span><br><span class="line">  <span class="built_in">type</span>: pvc</span><br><span class="line">  enabled: <span class="literal">true</span>             <span class="comment"># 1. 改成true,  如果没有默认的存储类那么需要做第二步</span></span><br><span class="line">  storageClassName: nas-sc  <span class="comment"># 【自己选sc】2. 改成集群已经存在的storageClassName， 自动生成pvc</span></span><br><span class="line">  <span class="comment"># storageClassName: default</span></span><br><span class="line">  accessModes:</span><br><span class="line">    - ReadWriteOnce</span><br><span class="line">  size: 10Gi</span><br><span class="line">  <span class="comment"># annotations: &#123;&#125;</span></span><br><span class="line">  finalizers:</span><br><span class="line">    - kubernetes.io/pvc-protection</span><br><span class="line">  <span class="comment"># selectorLabels: &#123;&#125;</span></span><br><span class="line">  <span class="comment">## Sub-directory of the PV to mount. Can be templated.</span></span><br><span class="line">  <span class="comment"># subPath: &quot;&quot;</span></span><br><span class="line">  <span class="comment">## Name of an existing PVC. Can be templated.</span></span><br><span class="line">  <span class="comment"># existingClaim:          # 【使用已有pvc】2. 如果有自己的PVC，去掉注释填上pvc的名称</span></span><br><span class="line">  <span class="comment">## Extra labels to apply to a PVC.</span></span><br><span class="line">  extraPvcLabels: &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">## If persistence is not enabled, this allows to mount the</span></span><br><span class="line">  <span class="comment">## local storage in-memory to improve performance</span></span><br><span class="line">  <span class="comment">##</span></span><br><span class="line">  inMemory:</span><br><span class="line">    enabled: <span class="literal">false</span></span><br><span class="line">    <span class="comment">## The maximum usage on memory medium EmptyDir would be</span></span><br><span class="line">    <span class="comment">## the minimum value between the SizeLimit specified</span></span><br><span class="line">    <span class="comment">## here and the sum of memory limits of all containers in a pod</span></span><br><span class="line">    <span class="comment">##</span></span><br><span class="line">    <span class="comment"># sizeLimit: 300Mi</span></span><br></pre></td></tr></table></figure>
<h2 id="部署grafana">部署grafana</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ sudo helm install --create-namespace --namespace monitoring  grafana ./grafana --debug</span><br><span class="line"></span><br><span class="line">NAME: grafana</span><br><span class="line">LAST DEPLOYED: Mon May  8 11:01:51 2023</span><br><span class="line">NAMESPACE: monitoring</span><br><span class="line">STATUS: deployed</span><br><span class="line">REVISION: 1</span><br></pre></td></tr></table></figure>
<details>
  <summary>展开查看debug信息</summary>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">install.go:194:</span> [<span class="string">debug</span>] <span class="attr">Original chart version:</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="attr">install.go:211:</span> [<span class="string">debug</span>] <span class="attr">CHART PATH:</span> <span class="string">/mnt/grafana</span></span><br><span class="line"><span class="attr">NAME:</span> <span class="string">grafana</span></span><br><span class="line"><span class="attr">LAST DEPLOYED:</span> <span class="string">Mon</span> <span class="string">May</span>  <span class="number">8</span> <span class="number">11</span><span class="string">:01:51</span> <span class="number">2023</span></span><br><span class="line"><span class="attr">NAMESPACE:</span> <span class="string">monitoring</span></span><br><span class="line"><span class="attr">STATUS:</span> <span class="string">deployed</span></span><br><span class="line"><span class="attr">REVISION:</span> <span class="number">1</span></span><br><span class="line"><span class="attr">USER-SUPPLIED VALUES:</span></span><br><span class="line">&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="attr">COMPUTED VALUES:</span></span><br><span class="line"><span class="attr">admin:</span></span><br><span class="line">  <span class="attr">existingSecret:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="attr">passwordKey:</span> <span class="string">admin-password</span></span><br><span class="line">  <span class="attr">userKey:</span> <span class="string">admin-user</span></span><br><span class="line"><span class="attr">adminUser:</span> <span class="string">admin</span></span><br><span class="line"><span class="attr">affinity:</span> &#123;&#125;</span><br><span class="line"><span class="attr">alerting:</span> &#123;&#125;</span><br><span class="line"><span class="attr">autoscaling:</span></span><br><span class="line">  <span class="attr">behavior:</span> &#123;&#125;</span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">maxReplicas:</span> <span class="number">5</span></span><br><span class="line">  <span class="attr">minReplicas:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">targetCPU:</span> <span class="string">&quot;60&quot;</span></span><br><span class="line">  <span class="attr">targetMemory:</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="attr">containerSecurityContext:</span></span><br><span class="line">  <span class="attr">capabilities:</span></span><br><span class="line">    <span class="attr">drop:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">ALL</span></span><br><span class="line">  <span class="attr">seccompProfile:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">RuntimeDefault</span></span><br><span class="line"><span class="attr">createConfigmap:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">dashboardProviders:</span> &#123;&#125;</span><br><span class="line"><span class="attr">dashboards:</span> &#123;&#125;</span><br><span class="line"><span class="attr">dashboardsConfigMaps:</span> &#123;&#125;</span><br><span class="line"><span class="attr">datasources:</span> &#123;&#125;</span><br><span class="line"><span class="attr">deploymentStrategy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">RollingUpdate</span></span><br><span class="line"><span class="attr">downloadDashboards:</span></span><br><span class="line">  <span class="attr">env:</span> &#123;&#125;</span><br><span class="line">  <span class="attr">envFromSecret:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="attr">envValueFrom:</span> &#123;&#125;</span><br><span class="line">  <span class="attr">resources:</span> &#123;&#125;</span><br><span class="line">  <span class="attr">securityContext:</span></span><br><span class="line">    <span class="attr">allowPrivilegeEscalation:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">capabilities:</span></span><br><span class="line">      <span class="attr">drop:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ALL</span></span><br><span class="line">    <span class="attr">seccompProfile:</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">RuntimeDefault</span></span><br><span class="line"><span class="attr">downloadDashboardsImage:</span></span><br><span class="line">  <span class="attr">pullPolicy:</span> <span class="string">IfNotPresent</span></span><br><span class="line">  <span class="attr">repository:</span> <span class="string">docker.io/curlimages/curl</span></span><br><span class="line">  <span class="attr">sha:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="attr">tag:</span> <span class="number">7.85</span><span class="number">.0</span></span><br><span class="line"><span class="attr">enableKubeBackwardCompatibility:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">enableServiceLinks:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">env:</span> &#123;&#125;</span><br><span class="line"><span class="attr">envFromConfigMaps:</span> []</span><br><span class="line"><span class="attr">envFromSecret:</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="attr">envFromSecrets:</span> []</span><br><span class="line"><span class="attr">envRenderSecret:</span> &#123;&#125;</span><br><span class="line"><span class="attr">envValueFrom:</span> &#123;&#125;</span><br><span class="line"><span class="attr">extraConfigmapMounts:</span> []</span><br><span class="line"><span class="attr">extraContainerVolumes:</span> []</span><br><span class="line"><span class="attr">extraContainers:</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="attr">extraEmptyDirMounts:</span> []</span><br><span class="line"><span class="attr">extraExposePorts:</span> []</span><br><span class="line"><span class="attr">extraInitContainers:</span> []</span><br><span class="line"><span class="attr">extraLabels:</span> &#123;&#125;</span><br><span class="line"><span class="attr">extraObjects:</span> []</span><br><span class="line"><span class="attr">extraSecretMounts:</span> []</span><br><span class="line"><span class="attr">extraVolumeMounts:</span> []</span><br><span class="line"><span class="attr">global:</span></span><br><span class="line">  <span class="attr">imagePullSecrets:</span> []</span><br><span class="line"><span class="attr">gossipPortName:</span> <span class="string">gossip</span></span><br><span class="line"><span class="attr">grafana.ini:</span></span><br><span class="line">  <span class="attr">analytics:</span></span><br><span class="line">    <span class="attr">check_for_updates:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">grafana_net:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">https://grafana.net</span></span><br><span class="line">  <span class="attr">log:</span></span><br><span class="line">    <span class="attr">mode:</span> <span class="string">console</span></span><br><span class="line">  <span class="attr">paths:</span></span><br><span class="line">    <span class="attr">data:</span> <span class="string">/var/lib/grafana/</span></span><br><span class="line">    <span class="attr">logs:</span> <span class="string">/var/log/grafana</span></span><br><span class="line">    <span class="attr">plugins:</span> <span class="string">/var/lib/grafana/plugins</span></span><br><span class="line">    <span class="attr">provisioning:</span> <span class="string">/etc/grafana/provisioning</span></span><br><span class="line">  <span class="attr">server:</span></span><br><span class="line">    <span class="attr">domain:</span> <span class="string">&#x27;<span class="template-variable">&#123;&#123; if (and .Values.ingress.enabled .Values.ingress.hosts) &#125;&#125;</span><span class="template-variable">&#123;&#123; .Values.ingress.hosts</span></span></span><br><span class="line"><span class="template-variable"><span class="string">      | first &#125;&#125;</span><span class="template-variable">&#123;&#123; else &#125;&#125;</span>&#x27;</span><span class="string">&#x27;&#x27;</span><span class="string">&#x27;<span class="template-variable">&#123;&#123; end &#125;&#125;</span>&#x27;</span></span><br><span class="line"><span class="attr">headlessService:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">hostAliases:</span> []</span><br><span class="line"><span class="attr">image:</span></span><br><span class="line">  <span class="attr">pullPolicy:</span> <span class="string">IfNotPresent</span></span><br><span class="line">  <span class="attr">pullSecrets:</span> []</span><br><span class="line">  <span class="attr">repository:</span> <span class="string">docker.io/grafana/grafana</span></span><br><span class="line">  <span class="attr">sha:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="attr">tag:</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="attr">imageRenderer:</span></span><br><span class="line">  <span class="attr">affinity:</span> &#123;&#125;</span><br><span class="line">  <span class="attr">autoscaling:</span></span><br><span class="line">    <span class="attr">behavior:</span> &#123;&#125;</span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">maxReplicas:</span> <span class="number">5</span></span><br><span class="line">    <span class="attr">minReplicas:</span> <span class="number">1</span></span><br><span class="line">    <span class="attr">targetCPU:</span> <span class="string">&quot;60&quot;</span></span><br><span class="line">    <span class="attr">targetMemory:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="attr">containerSecurityContext:</span></span><br><span class="line">    <span class="attr">allowPrivilegeEscalation:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">capabilities:</span></span><br><span class="line">      <span class="attr">drop:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ALL</span></span><br><span class="line">    <span class="attr">readOnlyRootFilesystem:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">seccompProfile:</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">RuntimeDefault</span></span><br><span class="line">  <span class="attr">deploymentStrategy:</span> &#123;&#125;</span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">env:</span></span><br><span class="line">    <span class="attr">HTTP_HOST:</span> <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span></span><br><span class="line">  <span class="attr">grafanaProtocol:</span> <span class="string">http</span></span><br><span class="line">  <span class="attr">grafanaSubPath:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="attr">hostAliases:</span> []</span><br><span class="line">  <span class="attr">image:</span></span><br><span class="line">    <span class="attr">pullPolicy:</span> <span class="string">Always</span></span><br><span class="line">    <span class="attr">repository:</span> <span class="string">docker.io/grafana/grafana-image-renderer</span></span><br><span class="line">    <span class="attr">sha:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="attr">tag:</span> <span class="string">latest</span></span><br><span class="line">  <span class="attr">networkPolicy:</span></span><br><span class="line">    <span class="attr">extraIngressSelectors:</span> []</span><br><span class="line">    <span class="attr">limitEgress:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">limitIngress:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">nodeSelector:</span> &#123;&#125;</span><br><span class="line">  <span class="attr">podPortName:</span> <span class="string">http</span></span><br><span class="line">  <span class="attr">priorityClassName:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">resources:</span> &#123;&#125;</span><br><span class="line">  <span class="attr">revisionHistoryLimit:</span> <span class="number">10</span></span><br><span class="line">  <span class="attr">securityContext:</span> &#123;&#125;</span><br><span class="line">  <span class="attr">service:</span></span><br><span class="line">    <span class="attr">appProtocol:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">8081</span></span><br><span class="line">    <span class="attr">portName:</span> <span class="string">http</span></span><br><span class="line">    <span class="attr">targetPort:</span> <span class="number">8081</span></span><br><span class="line">  <span class="attr">serviceAccountName:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="attr">serviceMonitor:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">interval:</span> <span class="string">1m</span></span><br><span class="line">    <span class="attr">labels:</span> &#123;&#125;</span><br><span class="line">    <span class="attr">path:</span> <span class="string">/metrics</span></span><br><span class="line">    <span class="attr">relabelings:</span> []</span><br><span class="line">    <span class="attr">scheme:</span> <span class="string">http</span></span><br><span class="line">    <span class="attr">scrapeTimeout:</span> <span class="string">30s</span></span><br><span class="line">    <span class="attr">targetLabels:</span> []</span><br><span class="line">    <span class="attr">tlsConfig:</span> &#123;&#125;</span><br><span class="line">  <span class="attr">tolerations:</span> []</span><br><span class="line"><span class="attr">ingress:</span></span><br><span class="line">  <span class="attr">annotations:</span> &#123;&#125;</span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">extraPaths:</span> []</span><br><span class="line">  <span class="attr">hosts:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">chart-example.local</span></span><br><span class="line">  <span class="attr">labels:</span> &#123;&#125;</span><br><span class="line">  <span class="attr">path:</span> <span class="string">/</span></span><br><span class="line">  <span class="attr">pathType:</span> <span class="string">Prefix</span></span><br><span class="line">  <span class="attr">tls:</span> []</span><br><span class="line"><span class="attr">initChownData:</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">image:</span></span><br><span class="line">    <span class="attr">pullPolicy:</span> <span class="string">IfNotPresent</span></span><br><span class="line">    <span class="attr">repository:</span> <span class="string">docker.io/library/busybox</span></span><br><span class="line">    <span class="attr">sha:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="attr">tag:</span> <span class="number">1.31</span><span class="number">.1</span></span><br><span class="line">  <span class="attr">resources:</span> &#123;&#125;</span><br><span class="line">  <span class="attr">securityContext:</span></span><br><span class="line">    <span class="attr">capabilities:</span></span><br><span class="line">      <span class="attr">add:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">CHOWN</span></span><br><span class="line">    <span class="attr">runAsNonRoot:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">runAsUser:</span> <span class="number">0</span></span><br><span class="line">    <span class="attr">seccompProfile:</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">RuntimeDefault</span></span><br><span class="line"><span class="attr">ldap:</span></span><br><span class="line">  <span class="attr">config:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">existingSecret:</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="attr">lifecycleHooks:</span> &#123;&#125;</span><br><span class="line"><span class="attr">livenessProbe:</span></span><br><span class="line">  <span class="attr">failureThreshold:</span> <span class="number">10</span></span><br><span class="line">  <span class="attr">httpGet:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">/api/health</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">3000</span></span><br><span class="line">  <span class="attr">initialDelaySeconds:</span> <span class="number">60</span></span><br><span class="line">  <span class="attr">timeoutSeconds:</span> <span class="number">30</span></span><br><span class="line"><span class="attr">namespaceOverride:</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="attr">networkPolicy:</span></span><br><span class="line">  <span class="attr">allowExternal:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">egress:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">ports:</span> []</span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">explicitNamespacesSelector:</span> &#123;&#125;</span><br><span class="line">  <span class="attr">ingress:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">nodeSelector:</span> &#123;&#125;</span><br><span class="line"><span class="attr">notifiers:</span> &#123;&#125;</span><br><span class="line"><span class="attr">persistence:</span></span><br><span class="line">  <span class="attr">accessModes:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">ReadWriteOnce</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">extraPvcLabels:</span> &#123;&#125;</span><br><span class="line">  <span class="attr">finalizers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">kubernetes.io/pvc-protection</span></span><br><span class="line">  <span class="attr">inMemory:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">size:</span> <span class="string">10Gi</span></span><br><span class="line">  <span class="attr">storageClassName:</span> <span class="string">nas-sc</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">pvc</span></span><br><span class="line"><span class="attr">plugins:</span> []</span><br><span class="line"><span class="attr">podDisruptionBudget:</span> &#123;&#125;</span><br><span class="line"><span class="attr">podPortName:</span> <span class="string">grafana</span></span><br><span class="line"><span class="attr">rbac:</span></span><br><span class="line">  <span class="attr">create:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">extraClusterRoleRules:</span> []</span><br><span class="line">  <span class="attr">extraRoleRules:</span> []</span><br><span class="line">  <span class="attr">namespaced:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">pspEnabled:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">pspUseAppArmor:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">readinessProbe:</span></span><br><span class="line">  <span class="attr">httpGet:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">/api/health</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">3000</span></span><br><span class="line"><span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line"><span class="attr">resources:</span> &#123;&#125;</span><br><span class="line"><span class="attr">revisionHistoryLimit:</span> <span class="number">10</span></span><br><span class="line"><span class="attr">securityContext:</span></span><br><span class="line">  <span class="attr">fsGroup:</span> <span class="number">472</span></span><br><span class="line">  <span class="attr">runAsGroup:</span> <span class="number">472</span></span><br><span class="line">  <span class="attr">runAsNonRoot:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">runAsUser:</span> <span class="number">472</span></span><br><span class="line"><span class="attr">service:</span></span><br><span class="line">  <span class="attr">annotations:</span> &#123;&#125;</span><br><span class="line">  <span class="attr">appProtocol:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">labels:</span> &#123;&#125;</span><br><span class="line">  <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line">  <span class="attr">portName:</span> <span class="string">service</span></span><br><span class="line">  <span class="attr">targetPort:</span> <span class="number">3000</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">ClusterIP</span></span><br><span class="line"><span class="attr">serviceAccount:</span></span><br><span class="line">  <span class="attr">autoMount:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">create:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">labels:</span> &#123;&#125;</span><br><span class="line">  <span class="attr">name:</span> <span class="literal">null</span></span><br><span class="line">  <span class="attr">nameTest:</span> <span class="literal">null</span></span><br><span class="line"><span class="attr">serviceMonitor:</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">interval:</span> <span class="string">1m</span></span><br><span class="line">  <span class="attr">labels:</span> &#123;&#125;</span><br><span class="line">  <span class="attr">path:</span> <span class="string">/metrics</span></span><br><span class="line">  <span class="attr">relabelings:</span> []</span><br><span class="line">  <span class="attr">scheme:</span> <span class="string">http</span></span><br><span class="line">  <span class="attr">scrapeTimeout:</span> <span class="string">30s</span></span><br><span class="line">  <span class="attr">targetLabels:</span> []</span><br><span class="line">  <span class="attr">tlsConfig:</span> &#123;&#125;</span><br><span class="line"><span class="attr">sidecar:</span></span><br><span class="line">  <span class="attr">alerts:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">env:</span> &#123;&#125;</span><br><span class="line">    <span class="attr">label:</span> <span class="string">grafana_alert</span></span><br><span class="line">    <span class="attr">labelValue:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="attr">reloadURL:</span> <span class="string">http://localhost:3000/api/admin/provisioning/alerting/reload</span></span><br><span class="line">    <span class="attr">resource:</span> <span class="string">both</span></span><br><span class="line">    <span class="attr">script:</span> <span class="literal">null</span></span><br><span class="line">    <span class="attr">searchNamespace:</span> <span class="literal">null</span></span><br><span class="line">    <span class="attr">sizeLimit:</span> &#123;&#125;</span><br><span class="line">    <span class="attr">skipReload:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">watchMethod:</span> <span class="string">WATCH</span></span><br><span class="line">  <span class="attr">dashboards:</span></span><br><span class="line">    <span class="attr">SCProvider:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">defaultFolderName:</span> <span class="literal">null</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">env:</span> &#123;&#125;</span><br><span class="line">    <span class="attr">extraMounts:</span> []</span><br><span class="line">    <span class="attr">folder:</span> <span class="string">/tmp/dashboards</span></span><br><span class="line">    <span class="attr">folderAnnotation:</span> <span class="literal">null</span></span><br><span class="line">    <span class="attr">label:</span> <span class="string">grafana_dashboard</span></span><br><span class="line">    <span class="attr">labelValue:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="attr">provider:</span></span><br><span class="line">      <span class="attr">allowUiUpdates:</span> <span class="literal">false</span></span><br><span class="line">      <span class="attr">disableDelete:</span> <span class="literal">false</span></span><br><span class="line">      <span class="attr">folder:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">      <span class="attr">foldersFromFilesStructure:</span> <span class="literal">false</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">sidecarProvider</span></span><br><span class="line">      <span class="attr">orgid:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">file</span></span><br><span class="line">    <span class="attr">reloadURL:</span> <span class="string">http://localhost:3000/api/admin/provisioning/dashboards/reload</span></span><br><span class="line">    <span class="attr">resource:</span> <span class="string">both</span></span><br><span class="line">    <span class="attr">script:</span> <span class="literal">null</span></span><br><span class="line">    <span class="attr">searchNamespace:</span> <span class="literal">null</span></span><br><span class="line">    <span class="attr">sizeLimit:</span> &#123;&#125;</span><br><span class="line">    <span class="attr">skipReload:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">watchMethod:</span> <span class="string">WATCH</span></span><br><span class="line">  <span class="attr">datasources:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">env:</span> &#123;&#125;</span><br><span class="line">    <span class="attr">initDatasources:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">label:</span> <span class="string">grafana_datasource</span></span><br><span class="line">    <span class="attr">labelValue:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="attr">reloadURL:</span> <span class="string">http://localhost:3000/api/admin/provisioning/datasources/reload</span></span><br><span class="line">    <span class="attr">resource:</span> <span class="string">both</span></span><br><span class="line">    <span class="attr">script:</span> <span class="literal">null</span></span><br><span class="line">    <span class="attr">searchNamespace:</span> <span class="literal">null</span></span><br><span class="line">    <span class="attr">sizeLimit:</span> &#123;&#125;</span><br><span class="line">    <span class="attr">skipReload:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">watchMethod:</span> <span class="string">WATCH</span></span><br><span class="line">  <span class="attr">enableUniqueFilenames:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">image:</span></span><br><span class="line">    <span class="attr">repository:</span> <span class="string">quay.io/kiwigrid/k8s-sidecar</span></span><br><span class="line">    <span class="attr">sha:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="attr">tag:</span> <span class="number">1.22</span><span class="number">.0</span></span><br><span class="line">  <span class="attr">imagePullPolicy:</span> <span class="string">IfNotPresent</span></span><br><span class="line">  <span class="attr">livenessProbe:</span> &#123;&#125;</span><br><span class="line">  <span class="attr">notifiers:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">env:</span> &#123;&#125;</span><br><span class="line">    <span class="attr">initNotifiers:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">label:</span> <span class="string">grafana_notifier</span></span><br><span class="line">    <span class="attr">labelValue:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="attr">reloadURL:</span> <span class="string">http://localhost:3000/api/admin/provisioning/notifications/reload</span></span><br><span class="line">    <span class="attr">resource:</span> <span class="string">both</span></span><br><span class="line">    <span class="attr">script:</span> <span class="literal">null</span></span><br><span class="line">    <span class="attr">searchNamespace:</span> <span class="literal">null</span></span><br><span class="line">    <span class="attr">sizeLimit:</span> &#123;&#125;</span><br><span class="line">    <span class="attr">skipReload:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">watchMethod:</span> <span class="string">WATCH</span></span><br><span class="line">  <span class="attr">plugins:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">env:</span> &#123;&#125;</span><br><span class="line">    <span class="attr">initPlugins:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">label:</span> <span class="string">grafana_plugin</span></span><br><span class="line">    <span class="attr">labelValue:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="attr">reloadURL:</span> <span class="string">http://localhost:3000/api/admin/provisioning/plugins/reload</span></span><br><span class="line">    <span class="attr">resource:</span> <span class="string">both</span></span><br><span class="line">    <span class="attr">script:</span> <span class="literal">null</span></span><br><span class="line">    <span class="attr">searchNamespace:</span> <span class="literal">null</span></span><br><span class="line">    <span class="attr">sizeLimit:</span> &#123;&#125;</span><br><span class="line">    <span class="attr">skipReload:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">watchMethod:</span> <span class="string">WATCH</span></span><br><span class="line">  <span class="attr">readinessProbe:</span> &#123;&#125;</span><br><span class="line">  <span class="attr">resources:</span> &#123;&#125;</span><br><span class="line">  <span class="attr">securityContext:</span></span><br><span class="line">    <span class="attr">allowPrivilegeEscalation:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">capabilities:</span></span><br><span class="line">      <span class="attr">drop:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ALL</span></span><br><span class="line">    <span class="attr">seccompProfile:</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">RuntimeDefault</span></span><br><span class="line"><span class="attr">smtp:</span></span><br><span class="line">  <span class="attr">existingSecret:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="attr">passwordKey:</span> <span class="string">password</span></span><br><span class="line">  <span class="attr">userKey:</span> <span class="string">user</span></span><br><span class="line"><span class="attr">testFramework:</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">image:</span> <span class="string">docker.io/bats/bats</span></span><br><span class="line">  <span class="attr">imagePullPolicy:</span> <span class="string">IfNotPresent</span></span><br><span class="line">  <span class="attr">securityContext:</span> &#123;&#125;</span><br><span class="line">  <span class="attr">tag:</span> <span class="string">v1.4.1</span></span><br><span class="line"><span class="attr">tolerations:</span> []</span><br><span class="line"><span class="attr">topologySpreadConstraints:</span> []</span><br><span class="line"><span class="attr">useStatefulSet:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="attr">HOOKS:</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: grafana/templates/tests/test-serviceaccount.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">grafana-6.56.1</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="string">&quot;9.5.1&quot;</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">grafana-test</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">monitoring</span></span><br><span class="line">  <span class="attr">annotations:</span></span><br><span class="line">    <span class="attr">&quot;helm.sh/hook&quot;:</span> <span class="string">test-success</span></span><br><span class="line">    <span class="attr">&quot;helm.sh/hook-delete-policy&quot;:</span> <span class="string">&quot;before-hook-creation,hook-succeeded&quot;</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: grafana/templates/tests/test-configmap.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ConfigMap</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">grafana-test</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">monitoring</span></span><br><span class="line">  <span class="attr">annotations:</span></span><br><span class="line">    <span class="attr">&quot;helm.sh/hook&quot;:</span> <span class="string">test-success</span></span><br><span class="line">    <span class="attr">&quot;helm.sh/hook-delete-policy&quot;:</span> <span class="string">&quot;before-hook-creation,hook-succeeded&quot;</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">grafana-6.56.1</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="string">&quot;9.5.1&quot;</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line">  <span class="attr">run.sh:</span> <span class="string">|-</span></span><br><span class="line"><span class="string">    @test &quot;Test Health&quot; &#123;</span></span><br><span class="line"><span class="string">      url=&quot;http://grafana/api/health&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="string">code=$(wget</span> <span class="string">--server-response</span> <span class="string">--spider</span> <span class="string">--timeout</span> <span class="number">90</span> <span class="string">--tries</span> <span class="number">10</span> <span class="string">$&#123;url&#125;</span> <span class="number">2</span><span class="string">&gt;&amp;1</span> <span class="string">|</span> <span class="string">awk</span> <span class="string">&#x27;/^  HTTP/&#123;print $2&#125;&#x27;</span><span class="string">)</span></span><br><span class="line">      [ <span class="string">&quot;$code&quot;</span> <span class="string">==</span> <span class="string">&quot;200&quot;</span> ]</span><br><span class="line">    <span class="string">&#125;</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: grafana/templates/tests/test.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">grafana-test</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">grafana-6.56.1</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="string">&quot;9.5.1&quot;</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line">  <span class="attr">annotations:</span></span><br><span class="line">    <span class="attr">&quot;helm.sh/hook&quot;:</span> <span class="string">test-success</span></span><br><span class="line">    <span class="attr">&quot;helm.sh/hook-delete-policy&quot;:</span> <span class="string">&quot;before-hook-creation,hook-succeeded&quot;</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">monitoring</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">serviceAccountName:</span> <span class="string">grafana-test</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">grafana-test</span></span><br><span class="line">      <span class="attr">image:</span> <span class="string">&quot;docker.io/bats/bats:v1.4.1&quot;</span></span><br><span class="line">      <span class="attr">imagePullPolicy:</span> <span class="string">&quot;IfNotPresent&quot;</span></span><br><span class="line">      <span class="attr">command:</span> [<span class="string">&quot;/opt/bats/bin/bats&quot;</span>, <span class="string">&quot;-t&quot;</span>, <span class="string">&quot;/tests/run.sh&quot;</span>]</span><br><span class="line">      <span class="attr">volumeMounts:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">mountPath:</span> <span class="string">/tests</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">tests</span></span><br><span class="line">          <span class="attr">readOnly:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">volumes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">tests</span></span><br><span class="line">      <span class="attr">configMap:</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">grafana-test</span></span><br><span class="line">  <span class="attr">restartPolicy:</span> <span class="string">Never</span></span><br><span class="line"><span class="attr">MANIFEST:</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: grafana/templates/serviceaccount.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">grafana-6.56.1</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="string">&quot;9.5.1&quot;</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">grafana</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">monitoring</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: grafana/templates/secret.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Secret</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">grafana</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">monitoring</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">grafana-6.56.1</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="string">&quot;9.5.1&quot;</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">Opaque</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line">  <span class="attr">admin-user:</span> <span class="string">&quot;YWRtaW4=&quot;</span></span><br><span class="line">  <span class="attr">admin-password:</span> <span class="string">&quot;MTRaTGxWeXNLWHJrYnhyUW9DV3dYZjM5ZjlCQ3lsMU1RNmVMYVdnUw==&quot;</span></span><br><span class="line">  <span class="attr">ldap-toml:</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: grafana/templates/configmap.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ConfigMap</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">grafana</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">monitoring</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">grafana-6.56.1</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="string">&quot;9.5.1&quot;</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line">  <span class="attr">grafana.ini:</span> <span class="string">|</span></span><br><span class="line"><span class="string">    [analytics]</span></span><br><span class="line"><span class="string">    check_for_updates = true</span></span><br><span class="line"><span class="string">    [grafana_net]</span></span><br><span class="line"><span class="string">    url = https://grafana.net</span></span><br><span class="line"><span class="string">    [log]</span></span><br><span class="line"><span class="string">    mode = console</span></span><br><span class="line"><span class="string">    [paths]</span></span><br><span class="line"><span class="string">    data = /var/lib/grafana/</span></span><br><span class="line"><span class="string">    logs = /var/log/grafana</span></span><br><span class="line"><span class="string">    plugins = /var/lib/grafana/plugins</span></span><br><span class="line"><span class="string">    provisioning = /etc/grafana/provisioning</span></span><br><span class="line"><span class="string">    [server]</span></span><br><span class="line"><span class="string">    domain = &#x27;&#x27;</span></span><br><span class="line"><span class="string"></span><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: grafana/templates/pvc.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">PersistentVolumeClaim</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">grafana</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">monitoring</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">grafana-6.56.1</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="string">&quot;9.5.1&quot;</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line">  <span class="attr">finalizers:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">kubernetes.io/pvc-protection</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">accessModes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;ReadWriteOnce&quot;</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">    <span class="attr">requests:</span></span><br><span class="line">      <span class="attr">storage:</span> <span class="string">&quot;10Gi&quot;</span></span><br><span class="line">  <span class="attr">storageClassName:</span> <span class="string">nas-sc</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: grafana/templates/clusterrole.yaml</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ClusterRole</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">grafana-6.56.1</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="string">&quot;9.5.1&quot;</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">grafana-clusterrole</span></span><br><span class="line"><span class="attr">rules:</span> []</span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: grafana/templates/clusterrolebinding.yaml</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ClusterRoleBinding</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">grafana-clusterrolebinding</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">grafana-6.56.1</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="string">&quot;9.5.1&quot;</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line"><span class="attr">subjects:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">namespace:</span> <span class="string">monitoring</span></span><br><span class="line"><span class="attr">roleRef:</span></span><br><span class="line">  <span class="attr">kind:</span> <span class="string">ClusterRole</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">grafana-clusterrole</span></span><br><span class="line">  <span class="attr">apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: grafana/templates/role.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Role</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">grafana</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">monitoring</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">grafana-6.56.1</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="string">&quot;9.5.1&quot;</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line"><span class="attr">rules:</span> []</span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: grafana/templates/rolebinding.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">RoleBinding</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">grafana</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">monitoring</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">grafana-6.56.1</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="string">&quot;9.5.1&quot;</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line"><span class="attr">roleRef:</span></span><br><span class="line">  <span class="attr">apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br><span class="line">  <span class="attr">kind:</span> <span class="string">Role</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">grafana</span></span><br><span class="line"><span class="attr">subjects:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">grafana</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">monitoring</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: grafana/templates/service.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">grafana</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">monitoring</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">grafana-6.56.1</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="string">&quot;9.5.1&quot;</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">ClusterIP</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">service</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">      <span class="attr">targetPort:</span> <span class="number">3000</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">grafana</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: grafana/templates/deployment.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">grafana</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">monitoring</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">grafana-6.56.1</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="string">&quot;9.5.1&quot;</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">revisionHistoryLimit:</span> <span class="number">10</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app.kubernetes.io/name:</span> <span class="string">grafana</span></span><br><span class="line">      <span class="attr">app.kubernetes.io/instance:</span> <span class="string">grafana</span></span><br><span class="line">  <span class="attr">strategy:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">RollingUpdate</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app.kubernetes.io/name:</span> <span class="string">grafana</span></span><br><span class="line">        <span class="attr">app.kubernetes.io/instance:</span> <span class="string">grafana</span></span><br><span class="line">      <span class="attr">annotations:</span></span><br><span class="line">        <span class="attr">checksum/config:</span> <span class="string">19d2af365db97b8a27f9f902f631ebd5a0739c98c77e20c41f479c8789695773</span></span><br><span class="line">        <span class="attr">checksum/dashboards-json-config:</span> <span class="string">01ba4719c80b6fe911b091a7c05124b64eeece964e09c058ef8f9805daca546b</span></span><br><span class="line">        <span class="attr">checksum/sc-dashboard-provider-config:</span> <span class="string">01ba4719c80b6fe911b091a7c05124b64eeece964e09c058ef8f9805daca546b</span></span><br><span class="line">        <span class="attr">checksum/secret:</span> <span class="string">e5bdf8d22f5bd1f9f151274a9673630e92a4dd2d29d4b390f0f0f61e466712c3</span></span><br><span class="line">        <span class="attr">kubectl.kubernetes.io/default-container:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      </span><br><span class="line">      <span class="attr">serviceAccountName:</span> <span class="string">grafana</span></span><br><span class="line">      <span class="attr">automountServiceAccountToken:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">securityContext:</span></span><br><span class="line">        <span class="attr">fsGroup:</span> <span class="number">472</span></span><br><span class="line">        <span class="attr">runAsGroup:</span> <span class="number">472</span></span><br><span class="line">        <span class="attr">runAsNonRoot:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">runAsUser:</span> <span class="number">472</span></span><br><span class="line">      <span class="attr">initContainers:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">init-chown-data</span></span><br><span class="line">          <span class="attr">image:</span> <span class="string">&quot;docker.io/library/busybox:1.31.1&quot;</span></span><br><span class="line">          <span class="attr">imagePullPolicy:</span> <span class="string">IfNotPresent</span></span><br><span class="line">          <span class="attr">securityContext:</span></span><br><span class="line">            <span class="attr">capabilities:</span></span><br><span class="line">              <span class="attr">add:</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">CHOWN</span></span><br><span class="line">            <span class="attr">runAsNonRoot:</span> <span class="literal">false</span></span><br><span class="line">            <span class="attr">runAsUser:</span> <span class="number">0</span></span><br><span class="line">            <span class="attr">seccompProfile:</span></span><br><span class="line">              <span class="attr">type:</span> <span class="string">RuntimeDefault</span></span><br><span class="line">          <span class="attr">command:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">chown</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">-R</span></span><br><span class="line">            <span class="bullet">-</span> <span class="number">472</span><span class="string">:472</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">/var/lib/grafana</span></span><br><span class="line">          <span class="attr">volumeMounts:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">storage</span></span><br><span class="line">              <span class="attr">mountPath:</span> <span class="string">&quot;/var/lib/grafana&quot;</span></span><br><span class="line">      <span class="attr">enableServiceLinks:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">grafana</span></span><br><span class="line">          <span class="attr">image:</span> <span class="string">&quot;docker.io/grafana/grafana:9.5.1&quot;</span></span><br><span class="line">          <span class="attr">imagePullPolicy:</span> <span class="string">IfNotPresent</span></span><br><span class="line">          <span class="attr">securityContext:</span></span><br><span class="line">            <span class="attr">capabilities:</span></span><br><span class="line">              <span class="attr">drop:</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">ALL</span></span><br><span class="line">            <span class="attr">seccompProfile:</span></span><br><span class="line">              <span class="attr">type:</span> <span class="string">RuntimeDefault</span></span><br><span class="line">          <span class="attr">volumeMounts:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">config</span></span><br><span class="line">              <span class="attr">mountPath:</span> <span class="string">&quot;/etc/grafana/grafana.ini&quot;</span></span><br><span class="line">              <span class="attr">subPath:</span> <span class="string">grafana.ini</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">storage</span></span><br><span class="line">              <span class="attr">mountPath:</span> <span class="string">&quot;/var/lib/grafana&quot;</span></span><br><span class="line">          <span class="attr">ports:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">grafana</span></span><br><span class="line">              <span class="attr">containerPort:</span> <span class="number">3000</span></span><br><span class="line">              <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">gossip-tcp</span></span><br><span class="line">              <span class="attr">containerPort:</span> <span class="number">9094</span></span><br><span class="line">              <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">gossip-udp</span></span><br><span class="line">              <span class="attr">containerPort:</span> <span class="number">9094</span></span><br><span class="line">              <span class="attr">protocol:</span> <span class="string">UDP</span></span><br><span class="line">          <span class="attr">env:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">POD_IP</span></span><br><span class="line">              <span class="attr">valueFrom:</span></span><br><span class="line">                <span class="attr">fieldRef:</span></span><br><span class="line">                  <span class="attr">fieldPath:</span> <span class="string">status.podIP</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">GF_SECURITY_ADMIN_USER</span></span><br><span class="line">              <span class="attr">valueFrom:</span></span><br><span class="line">                <span class="attr">secretKeyRef:</span></span><br><span class="line">                  <span class="attr">name:</span> <span class="string">grafana</span></span><br><span class="line">                  <span class="attr">key:</span> <span class="string">admin-user</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">GF_SECURITY_ADMIN_PASSWORD</span></span><br><span class="line">              <span class="attr">valueFrom:</span></span><br><span class="line">                <span class="attr">secretKeyRef:</span></span><br><span class="line">                  <span class="attr">name:</span> <span class="string">grafana</span></span><br><span class="line">                  <span class="attr">key:</span> <span class="string">admin-password</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">GF_PATHS_DATA</span></span><br><span class="line">              <span class="attr">value:</span> <span class="string">/var/lib/grafana/</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">GF_PATHS_LOGS</span></span><br><span class="line">              <span class="attr">value:</span> <span class="string">/var/log/grafana</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">GF_PATHS_PLUGINS</span></span><br><span class="line">              <span class="attr">value:</span> <span class="string">/var/lib/grafana/plugins</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">GF_PATHS_PROVISIONING</span></span><br><span class="line">              <span class="attr">value:</span> <span class="string">/etc/grafana/provisioning</span></span><br><span class="line">          <span class="attr">livenessProbe:</span></span><br><span class="line">            <span class="attr">failureThreshold:</span> <span class="number">10</span></span><br><span class="line">            <span class="attr">httpGet:</span></span><br><span class="line">              <span class="attr">path:</span> <span class="string">/api/health</span></span><br><span class="line">              <span class="attr">port:</span> <span class="number">3000</span></span><br><span class="line">            <span class="attr">initialDelaySeconds:</span> <span class="number">60</span></span><br><span class="line">            <span class="attr">timeoutSeconds:</span> <span class="number">30</span></span><br><span class="line">          <span class="attr">readinessProbe:</span></span><br><span class="line">            <span class="attr">httpGet:</span></span><br><span class="line">              <span class="attr">path:</span> <span class="string">/api/health</span></span><br><span class="line">              <span class="attr">port:</span> <span class="number">3000</span></span><br><span class="line">      <span class="attr">volumes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">config</span></span><br><span class="line">          <span class="attr">configMap:</span></span><br><span class="line">            <span class="attr">name:</span> <span class="string">grafana</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">storage</span></span><br><span class="line">          <span class="attr">persistentVolumeClaim:</span></span><br><span class="line">            <span class="attr">claimName:</span> <span class="string">grafana</span></span><br><span class="line"></span><br><span class="line"><span class="attr">NOTES:</span></span><br><span class="line"><span class="number">1</span><span class="string">.</span> <span class="string">Get</span> <span class="string">your</span> <span class="string">&#x27;admin&#x27;</span> <span class="attr">user password by running:</span></span><br><span class="line"></span><br><span class="line">   <span class="string">kubectl</span> <span class="string">get</span> <span class="string">secret</span> <span class="string">--namespace</span> <span class="string">monitoring</span> <span class="string">grafana</span> <span class="string">-o</span> <span class="string">jsonpath=&quot;&#123;.data.admin-password&#125;&quot;</span> <span class="string">|</span> <span class="string">base64</span> <span class="string">--decode</span> <span class="string">;</span> <span class="string">echo</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">2. The Grafana server can be accessed via port 80 on the following DNS name from within your cluster:</span></span><br><span class="line"></span><br><span class="line">   <span class="string">grafana.monitoring.svc.cluster.local</span></span><br><span class="line"></span><br><span class="line">   <span class="attr">Get the Grafana URL to visit by running these commands in the same shell:</span></span><br><span class="line">     <span class="string">export</span> <span class="string">POD_NAME=$(kubectl</span> <span class="string">get</span> <span class="string">pods</span> <span class="string">--namespace</span> <span class="string">monitoring</span> <span class="string">-l</span> <span class="string">&quot;app.kubernetes.io/name=grafana,app.kubernetes.io/instance=grafana&quot;</span> <span class="string">-o</span> <span class="string">jsonpath=&quot;&#123;.items[0].metadata.name&#125;&quot;)</span></span><br><span class="line">     <span class="string">kubectl</span> <span class="string">--namespace</span> <span class="string">monitoring</span> <span class="string">port-forward</span> <span class="string">$POD_NAME</span> <span class="number">3000</span></span><br><span class="line"></span><br><span class="line"><span class="attr">3. Login with the password from step 1 and the username:</span> <span class="string">admin</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</details>
<h2 id="登录grafana">登录grafana</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1. 通过如下做一下svc的映射： kubectl port-forward svc/[service-name] -n [namespace] [external-port]:[internal-port]</span></span><br><span class="line">$ sudo kubectl port-forward svc/grafana -n monitoring 80:80 --address=<span class="string">&#x27;0.0.0.0&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#2. 获取初始密码</span></span><br><span class="line">NOTES:</span><br><span class="line">Get your <span class="string">&#x27;admin&#x27;</span> user password by running:</span><br><span class="line"></span><br><span class="line">   kubectl get secret --namespace monitoring grafana -o jsonpath=<span class="string">&quot;&#123;.data.admin-password&#125;&quot;</span> | <span class="built_in">base64</span> --decode ; <span class="built_in">echo</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 通过本地IP+80即可访问</span></span><br></pre></td></tr></table></figure>
<h2 id="查看manifest">查看manifest</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo helm get manifest grafana --namespace monitoring</span><br></pre></td></tr></table></figure>
<details> 
  <summary>点击展开查看manifest</summary>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: grafana/templates/serviceaccount.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">grafana-6.56.1</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="string">&quot;9.5.1&quot;</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">grafana</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">monitoring</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: grafana/templates/secret.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Secret</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">grafana</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">monitoring</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">grafana-6.56.1</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="string">&quot;9.5.1&quot;</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">Opaque</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line">  <span class="attr">admin-user:</span> <span class="string">&quot;YWRtaW4=&quot;</span></span><br><span class="line">  <span class="attr">admin-password:</span> <span class="string">&quot;MTRaTGxWeXNLWHJrYnhyUW9DV3dYZjM5ZjlCQ3lsMU1RNmVMYVdnUw==&quot;</span></span><br><span class="line">  <span class="attr">ldap-toml:</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: grafana/templates/configmap.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ConfigMap</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">grafana</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">monitoring</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">grafana-6.56.1</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="string">&quot;9.5.1&quot;</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line">  <span class="attr">grafana.ini:</span> <span class="string">|</span></span><br><span class="line"><span class="string">    [analytics]</span></span><br><span class="line"><span class="string">    check_for_updates = true</span></span><br><span class="line"><span class="string">    [grafana_net]</span></span><br><span class="line"><span class="string">    url = https://grafana.net</span></span><br><span class="line"><span class="string">    [log]</span></span><br><span class="line"><span class="string">    mode = console</span></span><br><span class="line"><span class="string">    [paths]</span></span><br><span class="line"><span class="string">    data = /var/lib/grafana/</span></span><br><span class="line"><span class="string">    logs = /var/log/grafana</span></span><br><span class="line"><span class="string">    plugins = /var/lib/grafana/plugins</span></span><br><span class="line"><span class="string">    provisioning = /etc/grafana/provisioning</span></span><br><span class="line"><span class="string">    [server]</span></span><br><span class="line"><span class="string">    domain = &#x27;&#x27;</span></span><br><span class="line"><span class="string"></span><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: grafana/templates/pvc.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">PersistentVolumeClaim</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">grafana</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">monitoring</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">grafana-6.56.1</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="string">&quot;9.5.1&quot;</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line">  <span class="attr">finalizers:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">kubernetes.io/pvc-protection</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">accessModes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;ReadWriteOnce&quot;</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">    <span class="attr">requests:</span></span><br><span class="line">      <span class="attr">storage:</span> <span class="string">&quot;10Gi&quot;</span></span><br><span class="line">  <span class="attr">storageClassName:</span> <span class="string">nas-sc</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: grafana/templates/clusterrole.yaml</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ClusterRole</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">grafana-6.56.1</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="string">&quot;9.5.1&quot;</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">grafana-clusterrole</span></span><br><span class="line"><span class="attr">rules:</span> []</span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: grafana/templates/clusterrolebinding.yaml</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ClusterRoleBinding</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">grafana-clusterrolebinding</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">grafana-6.56.1</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="string">&quot;9.5.1&quot;</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line"><span class="attr">subjects:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">namespace:</span> <span class="string">monitoring</span></span><br><span class="line"><span class="attr">roleRef:</span></span><br><span class="line">  <span class="attr">kind:</span> <span class="string">ClusterRole</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">grafana-clusterrole</span></span><br><span class="line">  <span class="attr">apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: grafana/templates/role.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Role</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">grafana</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">monitoring</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">grafana-6.56.1</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="string">&quot;9.5.1&quot;</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line"><span class="attr">rules:</span> []</span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: grafana/templates/rolebinding.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">RoleBinding</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">grafana</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">monitoring</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">grafana-6.56.1</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="string">&quot;9.5.1&quot;</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line"><span class="attr">roleRef:</span></span><br><span class="line">  <span class="attr">apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br><span class="line">  <span class="attr">kind:</span> <span class="string">Role</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">grafana</span></span><br><span class="line"><span class="attr">subjects:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">grafana</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">monitoring</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: grafana/templates/service.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">grafana</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">monitoring</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">grafana-6.56.1</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="string">&quot;9.5.1&quot;</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">ClusterIP</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">service</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">      <span class="attr">targetPort:</span> <span class="number">3000</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">grafana</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># Source: grafana/templates/deployment.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">grafana</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">monitoring</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">helm.sh/chart:</span> <span class="string">grafana-6.56.1</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/name:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/instance:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/version:</span> <span class="string">&quot;9.5.1&quot;</span></span><br><span class="line">    <span class="attr">app.kubernetes.io/managed-by:</span> <span class="string">Helm</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">revisionHistoryLimit:</span> <span class="number">10</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app.kubernetes.io/name:</span> <span class="string">grafana</span></span><br><span class="line">      <span class="attr">app.kubernetes.io/instance:</span> <span class="string">grafana</span></span><br><span class="line">  <span class="attr">strategy:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">RollingUpdate</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app.kubernetes.io/name:</span> <span class="string">grafana</span></span><br><span class="line">        <span class="attr">app.kubernetes.io/instance:</span> <span class="string">grafana</span></span><br><span class="line">      <span class="attr">annotations:</span></span><br><span class="line">        <span class="attr">checksum/config:</span> <span class="string">19d2af365db97b8a27f9f902f631ebd5a0739c98c77e20c41f479c8789695773</span></span><br><span class="line">        <span class="attr">checksum/dashboards-json-config:</span> <span class="string">01ba4719c80b6fe911b091a7c05124b64eeece964e09c058ef8f9805daca546b</span></span><br><span class="line">        <span class="attr">checksum/sc-dashboard-provider-config:</span> <span class="string">01ba4719c80b6fe911b091a7c05124b64eeece964e09c058ef8f9805daca546b</span></span><br><span class="line">        <span class="attr">checksum/secret:</span> <span class="string">e5bdf8d22f5bd1f9f151274a9673630e92a4dd2d29d4b390f0f0f61e466712c3</span></span><br><span class="line">        <span class="attr">kubectl.kubernetes.io/default-container:</span> <span class="string">grafana</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line"></span><br><span class="line">      <span class="attr">serviceAccountName:</span> <span class="string">grafana</span></span><br><span class="line">      <span class="attr">automountServiceAccountToken:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">securityContext:</span></span><br><span class="line">        <span class="attr">fsGroup:</span> <span class="number">472</span></span><br><span class="line">        <span class="attr">runAsGroup:</span> <span class="number">472</span></span><br><span class="line">        <span class="attr">runAsNonRoot:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">runAsUser:</span> <span class="number">472</span></span><br><span class="line">      <span class="attr">initContainers:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">init-chown-data</span></span><br><span class="line">          <span class="attr">image:</span> <span class="string">&quot;docker.io/library/busybox:1.31.1&quot;</span></span><br><span class="line">          <span class="attr">imagePullPolicy:</span> <span class="string">IfNotPresent</span></span><br><span class="line">          <span class="attr">securityContext:</span></span><br><span class="line">            <span class="attr">capabilities:</span></span><br><span class="line">              <span class="attr">add:</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">CHOWN</span></span><br><span class="line">            <span class="attr">runAsNonRoot:</span> <span class="literal">false</span></span><br><span class="line">            <span class="attr">runAsUser:</span> <span class="number">0</span></span><br><span class="line">            <span class="attr">seccompProfile:</span></span><br><span class="line">              <span class="attr">type:</span> <span class="string">RuntimeDefault</span></span><br><span class="line">          <span class="attr">command:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">chown</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">-R</span></span><br><span class="line">            <span class="bullet">-</span> <span class="number">472</span><span class="string">:472</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">/var/lib/grafana</span></span><br><span class="line">          <span class="attr">volumeMounts:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">storage</span></span><br><span class="line">              <span class="attr">mountPath:</span> <span class="string">&quot;/var/lib/grafana&quot;</span></span><br><span class="line">      <span class="attr">enableServiceLinks:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">grafana</span></span><br><span class="line">          <span class="attr">image:</span> <span class="string">&quot;docker.io/grafana/grafana:9.5.1&quot;</span></span><br><span class="line">          <span class="attr">imagePullPolicy:</span> <span class="string">IfNotPresent</span></span><br><span class="line">          <span class="attr">securityContext:</span></span><br><span class="line">            <span class="attr">capabilities:</span></span><br><span class="line">              <span class="attr">drop:</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">ALL</span></span><br><span class="line">            <span class="attr">seccompProfile:</span></span><br><span class="line">              <span class="attr">type:</span> <span class="string">RuntimeDefault</span></span><br><span class="line">          <span class="attr">volumeMounts:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">config</span></span><br><span class="line">              <span class="attr">mountPath:</span> <span class="string">&quot;/etc/grafana/grafana.ini&quot;</span></span><br><span class="line">              <span class="attr">subPath:</span> <span class="string">grafana.ini</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">storage</span></span><br><span class="line">              <span class="attr">mountPath:</span> <span class="string">&quot;/var/lib/grafana&quot;</span></span><br><span class="line">          <span class="attr">ports:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">grafana</span></span><br><span class="line">              <span class="attr">containerPort:</span> <span class="number">3000</span></span><br><span class="line">              <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">gossip-tcp</span></span><br><span class="line">              <span class="attr">containerPort:</span> <span class="number">9094</span></span><br><span class="line">              <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">gossip-udp</span></span><br><span class="line">              <span class="attr">containerPort:</span> <span class="number">9094</span></span><br><span class="line">              <span class="attr">protocol:</span> <span class="string">UDP</span></span><br><span class="line">          <span class="attr">env:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">POD_IP</span></span><br><span class="line">              <span class="attr">valueFrom:</span></span><br><span class="line">                <span class="attr">fieldRef:</span></span><br><span class="line">                  <span class="attr">fieldPath:</span> <span class="string">status.podIP</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">GF_SECURITY_ADMIN_USER</span></span><br><span class="line">              <span class="attr">valueFrom:</span></span><br><span class="line">                <span class="attr">secretKeyRef:</span></span><br><span class="line">                  <span class="attr">name:</span> <span class="string">grafana</span></span><br><span class="line">                  <span class="attr">key:</span> <span class="string">admin-user</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">GF_SECURITY_ADMIN_PASSWORD</span></span><br><span class="line">              <span class="attr">valueFrom:</span></span><br><span class="line">                <span class="attr">secretKeyRef:</span></span><br><span class="line">                  <span class="attr">name:</span> <span class="string">grafana</span></span><br><span class="line">                  <span class="attr">key:</span> <span class="string">admin-password</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">GF_PATHS_DATA</span></span><br><span class="line">              <span class="attr">value:</span> <span class="string">/var/lib/grafana/</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">GF_PATHS_LOGS</span></span><br><span class="line">              <span class="attr">value:</span> <span class="string">/var/log/grafana</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">GF_PATHS_PLUGINS</span></span><br><span class="line">              <span class="attr">value:</span> <span class="string">/var/lib/grafana/plugins</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">GF_PATHS_PROVISIONING</span></span><br><span class="line">              <span class="attr">value:</span> <span class="string">/etc/grafana/provisioning</span></span><br><span class="line">          <span class="attr">livenessProbe:</span></span><br><span class="line">            <span class="attr">failureThreshold:</span> <span class="number">10</span></span><br><span class="line">            <span class="attr">httpGet:</span></span><br><span class="line">              <span class="attr">path:</span> <span class="string">/api/health</span></span><br><span class="line">              <span class="attr">port:</span> <span class="number">3000</span></span><br><span class="line">            <span class="attr">initialDelaySeconds:</span> <span class="number">60</span></span><br><span class="line">            <span class="attr">timeoutSeconds:</span> <span class="number">30</span></span><br><span class="line">          <span class="attr">readinessProbe:</span></span><br><span class="line">            <span class="attr">httpGet:</span></span><br><span class="line">              <span class="attr">path:</span> <span class="string">/api/health</span></span><br><span class="line">              <span class="attr">port:</span> <span class="number">3000</span></span><br><span class="line">      <span class="attr">volumes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">config</span></span><br><span class="line">          <span class="attr">configMap:</span></span><br><span class="line">            <span class="attr">name:</span> <span class="string">grafana</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">storage</span></span><br><span class="line">          <span class="attr">persistentVolumeClaim:</span></span><br><span class="line">            <span class="attr">claimName:</span> <span class="string">grafana</span></span><br></pre></td></tr></table></figure>
</details>
    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/k8s/" rel="tag"># k8s</a>
              <a href="/tags/grafana/" rel="tag"># grafana</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2023/05/07/KubeSkoop/" rel="prev" title="快速安装阿里开源的kubeskoop，配合Prometheus+Grafana">
      <i class="fa fa-chevron-left"></i> 快速安装阿里开源的kubeskoop，配合Prometheus+Grafana
    </a></div>
      <div class="post-nav-item">
    <a href="/2023/05/08/helmInstallPrometheus/" rel="next" title="Helm 安装prometheus">
      Helm 安装prometheus <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD%E6%8C%87%E5%AE%9A%E7%89%88%E6%9C%ACgrafana"><span class="nav-number">1.</span> <span class="nav-text">下载指定版本grafana</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8Bvalues-yaml"><span class="nav-number">2.</span> <span class="nav-text">查看values.yaml</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AEpvc"><span class="nav-number">3.</span> <span class="nav-text">设置pvc</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%83%A8%E7%BD%B2grafana"><span class="nav-number">4.</span> <span class="nav-text">部署grafana</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%99%BB%E5%BD%95grafana"><span class="nav-number">5.</span> <span class="nav-text">登录grafana</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8Bmanifest"><span class="nav-number">6.</span> <span class="nav-text">查看manifest</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="zmq"
      src="/images/tx.jpg">
  <p class="site-author-name" itemprop="name">zmq</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">27</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">36</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/zmquan" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;zmquan" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        
<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zmq</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>
  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">闽ICP备2021010566号-1 </a>
  </div>

 <a target="_blank" rel="noopener" href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral"> 
   <img src="https://img.zmq100.cn/logo/又拍云_logo5.png" border="0" width="50" height="25"> 
</a>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
